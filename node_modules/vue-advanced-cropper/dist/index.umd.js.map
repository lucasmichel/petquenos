{"version":3,"file":"index.umd.js","sources":["../src/core/image.ts","../src/core/algorithms/manipulateImage.ts","../src/core/algorithms/approximatedSize.ts","../src/core/service.ts","../node_modules/debounce/index.js","../src/core/utils.ts","../src/core/algorithms/move.ts","../src/core/algorithms/applyTransform.ts","../src/core/algorithms/autoZoom.ts","../src/core/algorithms/defaultBoundaries.ts","../src/core/algorithms/defaultSize.ts","../src/core/algorithms/defaultVisibleArea.ts","../src/core/algorithms/fitCoordinates.ts","../src/core/algorithms/limitBy.ts","../src/core/algorithms/normalizeEvent.ts","../src/core/algorithms/refineSizeRestrictions.ts","../src/core/algorithms/refineVisibleArea.ts","../src/core/algorithms/resize.ts","../src/core/algorithms/roundCoordinates.ts","../src/core/algorithms/fitVisibleArea.ts","../node_modules/rollup-plugin-vue/node_modules/vue-runtime-helpers/dist/normalize-component.mjs","../src/core/touch.ts","../src/core/canvas.ts","../node_modules/classnames/index.js","../node_modules/easy-bem/index.js","../node_modules/tslib/tslib.es6.js","../src/core/events.ts","../src/core/constants.ts","../src/mixins/draggable.js","../src/core/algorithms/initStretcher.ts","../src/core/algorithms/defaultPosition.ts","../src/core/algorithms/areaRestrictions.ts","../src/core/algorithms/sizeRestrictions.ts","../src/core/algorithms/positionRestrictions.ts","../src/index.js"],"sourcesContent":["import { ImageTransforms } from './typings';\r\n\r\nexport const XHR_DONE = 4;\r\n\r\nexport function prepareSource(canvas, image, { flipped, orientation }) {\r\n\tconst width = image.naturalWidth;\r\n\tconst height = image.naturalHeight;\r\n\r\n\tconst ctx = canvas.getContext('2d');\r\n\tcanvas.width = width;\r\n\tcanvas.height = height;\r\n\r\n\tctx.save();\r\n\r\n\tif (flipped) {\r\n\t\tcanvas.width = height;\r\n\t\tcanvas.height = width;\r\n\t}\r\n\r\n\t// TODO: refactor this\r\n\tif (orientation == 2) {\r\n\t\tctx.translate(width, 0);\r\n\t\tctx.scale(-1, 1);\r\n\t} else if (orientation == 3) {\r\n\t\tctx.translate(width, height);\r\n\t\tctx.rotate((180 / 180) * Math.PI);\r\n\t} else if (orientation == 4) {\r\n\t\tctx.translate(0, height);\r\n\t\tctx.scale(1, -1);\r\n\t} else if (orientation == 5) {\r\n\t\tctx.rotate((90 / 180) * Math.PI);\r\n\t\tctx.scale(1, -1);\r\n\t} else if (orientation == 6) {\r\n\t\tctx.rotate((90 / 180) * Math.PI);\r\n\t\tctx.translate(0, -height);\r\n\t} else if (orientation == 7) {\r\n\t\tctx.rotate((270 / 180) * Math.PI);\r\n\t\tctx.translate(-width, height);\r\n\t\tctx.scale(1, -1);\r\n\t} else if (orientation == 8) {\r\n\t\tctx.translate(0, width);\r\n\t\tctx.rotate((270 / 180) * Math.PI);\r\n\t}\r\n\r\n\tctx.drawImage(image, 0, 0, width, height);\r\n\tctx.restore();\r\n\r\n\treturn canvas;\r\n}\r\n\r\nfunction base64ToArrayBuffer(base64) {\r\n\tbase64 = base64.replace(/^data:([^;]+);base64,/gim, '');\r\n\tconst binary = atob(base64);\r\n\tconst len = binary.length;\r\n\tconst buffer = new ArrayBuffer(len);\r\n\tconst view = new Uint8Array(buffer);\r\n\tfor (let i = 0; i < len; i++) {\r\n\t\tview[i] = binary.charCodeAt(i);\r\n\t}\r\n\treturn buffer;\r\n}\r\n\r\nfunction objectURLToBlob(url, callback) {\r\n\tconst http = new XMLHttpRequest();\r\n\thttp.open('GET', url, true);\r\n\thttp.responseType = 'blob';\r\n\thttp.onload = function () {\r\n\t\tif (this.status == 200 || this.status === 0) {\r\n\t\t\tcallback(this.response);\r\n\t\t}\r\n\t};\r\n\thttp.send();\r\n}\r\n\r\nexport function getImageTransforms(orientation: number) {\r\n\tconst result: ImageTransforms = {\r\n\t\torientation,\r\n\t};\r\n\tif (orientation) {\r\n\t\tswitch (orientation) {\r\n\t\t\tcase 2:\r\n\t\t\t\tresult.scaleX = -1;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 3:\r\n\t\t\t\tresult.rotate = -180;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 4:\r\n\t\t\t\tresult.scaleY = -1;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 5:\r\n\t\t\t\tresult.rotate = 90;\r\n\t\t\t\tresult.scaleY = -1;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 6:\r\n\t\t\t\tresult.rotate = 90;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 7:\r\n\t\t\t\tresult.rotate = 90;\r\n\t\t\t\tresult.scaleX = -1;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 8:\r\n\t\t\t\tresult.rotate = -90;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\tif (result.rotate === 90 || result.rotate === -90) {\r\n\t\tresult.flipped = true;\r\n\t}\r\n\treturn result;\r\n}\r\nfunction getImageData(img) {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\ttry {\r\n\t\t\tif (img) {\r\n\t\t\t\tif (/^data:/i.test(img)) {\r\n\t\t\t\t\t// Data URL\r\n\t\t\t\t\tresolve(base64ToArrayBuffer(img));\r\n\t\t\t\t} else if (/^blob:/i.test(img)) {\r\n\t\t\t\t\t// Blob\r\n\t\t\t\t\tconst fileReader = new FileReader();\r\n\t\t\t\t\tfileReader.onload = function (e) {\r\n\t\t\t\t\t\tresolve(e.target.result);\r\n\t\t\t\t\t};\r\n\t\t\t\t\tobjectURLToBlob(img, function (blob) {\r\n\t\t\t\t\t\tfileReader.readAsArrayBuffer(blob);\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Simple URL\r\n\t\t\t\t\tlet http = new XMLHttpRequest();\r\n\t\t\t\t\thttp.onreadystatechange = function () {\r\n\t\t\t\t\t\tif (http.readyState !== XHR_DONE) return;\r\n\r\n\t\t\t\t\t\tif (http.status === 200 || http.status === 0) {\r\n\t\t\t\t\t\t\tresolve(http.response);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treject('Warning: could not load an image to parse its orientation');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\thttp = null;\r\n\t\t\t\t\t};\r\n\t\t\t\t\thttp.onprogress = function () {\r\n\t\t\t\t\t\t// Abort the request directly if it not a JPEG image for better performance\r\n\t\t\t\t\t\tif (http.getResponseHeader('content-type') !== 'image/jpeg') {\r\n\t\t\t\t\t\t\thttp.abort();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\thttp.withCredentials = false;\r\n\t\t\t\t\thttp.open('GET', img, true);\r\n\t\t\t\t\thttp.responseType = 'arraybuffer';\r\n\t\t\t\t\thttp.send(null);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\treject('Error: the image is empty');\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\treject(e);\r\n\t\t}\r\n\t});\r\n}\r\n\r\nexport function getStyleTransforms({ rotate, scaleX, scaleY }) {\r\n\tlet transform = '';\r\n\tif (rotate || scaleX || scaleY) {\r\n\t\tif (rotate) {\r\n\t\t\ttransform += ` rotate(${rotate}deg) `;\r\n\t\t}\r\n\t\tif (scaleX) {\r\n\t\t\ttransform += ` scaleX(${scaleX}) `;\r\n\t\t}\r\n\t\tif (scaleY) {\r\n\t\t\ttransform += ` scaleY(${scaleY}) `;\r\n\t\t}\r\n\t}\r\n\treturn transform;\r\n}\r\n\r\nfunction getStringFromCharCode(dataView, start, length) {\r\n\tlet str = '';\r\n\tlet i;\r\n\tfor (i = start, length += start; i < length; i++) {\r\n\t\tstr += String.fromCharCode(dataView.getUint8(i));\r\n\t}\r\n\treturn str;\r\n}\r\n\r\nfunction getOrientation(arrayBuffer) {\r\n\ttry {\r\n\t\tconst dataView = new DataView(arrayBuffer);\r\n\t\tlet orientation;\r\n\t\tlet exifIDCode;\r\n\t\tlet tiffOffset;\r\n\t\tlet littleEndian;\r\n\t\tlet app1Start;\r\n\t\tlet ifdStart;\r\n\t\t// Only handle JPEG image (start by 0xFFD8)\r\n\t\tif (dataView.getUint8(0) === 0xff && dataView.getUint8(1) === 0xd8) {\r\n\t\t\tconst length = dataView.byteLength;\r\n\t\t\tlet offset = 2;\r\n\t\t\twhile (offset + 1 < length) {\r\n\t\t\t\tif (dataView.getUint8(offset) === 0xff && dataView.getUint8(offset + 1) === 0xe1) {\r\n\t\t\t\t\tapp1Start = offset;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\toffset++;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (app1Start) {\r\n\t\t\texifIDCode = app1Start + 4;\r\n\t\t\ttiffOffset = app1Start + 10;\r\n\t\t\tif (getStringFromCharCode(dataView, exifIDCode, 4) === 'Exif') {\r\n\t\t\t\tconst endianness = dataView.getUint16(tiffOffset);\r\n\r\n\t\t\t\tlittleEndian = endianness === 0x4949;\r\n\r\n\t\t\t\tif (littleEndian || endianness === 0x4d4d /* bigEndian */) {\r\n\t\t\t\t\tif (dataView.getUint16(tiffOffset + 2, littleEndian) === 0x002a) {\r\n\t\t\t\t\t\tconst firstIFDOffset = dataView.getUint32(tiffOffset + 4, littleEndian);\r\n\t\t\t\t\t\tif (firstIFDOffset >= 0x00000008) {\r\n\t\t\t\t\t\t\tifdStart = tiffOffset + firstIFDOffset;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (ifdStart) {\r\n\t\t\tconst length = dataView.getUint16(ifdStart, littleEndian);\r\n\r\n\t\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\t\tlet offset = ifdStart + i * 12 + 2;\r\n\t\t\t\tif (dataView.getUint16(offset, littleEndian) === 0x0112 /* Orientation */) {\r\n\t\t\t\t\t// 8 is the offset of the current tag's value\r\n\t\t\t\t\toffset += 8;\r\n\t\t\t\t\t// Get the original orientation value\r\n\t\t\t\t\torientation = dataView.getUint16(offset, littleEndian);\r\n\t\t\t\t\t// Override the orientation with its default value\r\n\t\t\t\t\tdataView.setUint16(offset, 1, littleEndian);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn orientation;\r\n\t} catch (error) {\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\nexport function parseImage(src: string) {\r\n\treturn new Promise((resolve) => {\r\n\t\tgetImageData(src)\r\n\t\t\t.then((data) => {\r\n\t\t\t\tresolve(\r\n\t\t\t\t\tdata\r\n\t\t\t\t\t\t? { source: src, arrayBuffer: data, orientation: getOrientation(data) }\r\n\t\t\t\t\t\t: { source: src, arrayBuffer: null, orientation: null },\r\n\t\t\t\t);\r\n\t\t\t})\r\n\t\t\t.catch((error) => {\r\n\t\t\t\tconsole.warn(error);\r\n\t\t\t\tresolve({ source: src, arrayBuffer: null, orientation: null });\r\n\t\t\t});\r\n\t});\r\n}\r\n\r\nexport function arrayBufferToDataURL(arrayBuffer) {\r\n\tconst chunks = [];\r\n\r\n\t// Chunk Typed Array for better performance\r\n\tconst chunkSize = 8192;\r\n\tlet uint8 = new Uint8Array(arrayBuffer);\r\n\r\n\twhile (uint8.length > 0) {\r\n\t\tconst value = uint8.subarray(0, chunkSize);\r\n\t\tchunks.push(String.fromCharCode.apply(null, Array.from ? Array.from(value) : value.slice()));\r\n\t\tuint8 = uint8.subarray(chunkSize);\r\n\t}\r\n\r\n\treturn `data:image/jpeg;base64,${btoa(chunks.join(''))}`;\r\n}\r\n","import { ManipulateImageEvent } from '../events';\r\nimport { AreaRestrictions, Coordinates, PositionRestrictions, SizeRestrictions, VisibleArea } from '../typings';\r\nimport { applyMove, applyScale, fit, getCenter, maxScale } from '../service';\r\n\r\ninterface ManipulateImageParams {\r\n\tevent: ManipulateImageEvent;\r\n\tcoordinates: Coordinates;\r\n\tvisibleArea: VisibleArea;\r\n\tsizeRestrictions: SizeRestrictions;\r\n\tpositionRestrictions: PositionRestrictions;\r\n\tareaRestrictions: AreaRestrictions;\r\n\tsettings: {\r\n\t\tstencil?: boolean;\r\n\t};\r\n}\r\ninterface ManipulateImageResult {\r\n\tvisibleArea: VisibleArea;\r\n\tcoordinates: Coordinates;\r\n}\r\nexport function manipulateImage(params: ManipulateImageParams): ManipulateImageResult {\r\n\tconst {\r\n\t\tevent,\r\n\t\tcoordinates: originalCoordinates,\r\n\t\tvisibleArea: originalVisibleArea,\r\n\t\tsizeRestrictions,\r\n\t\tareaRestrictions,\r\n\t\tpositionRestrictions,\r\n\t\tsettings = {},\r\n\t} = params;\r\n\r\n\tconst { scale, move } = event;\r\n\r\n\tlet visibleArea = { ...originalVisibleArea };\r\n\tconst coordinates = { ...originalCoordinates };\r\n\r\n\tlet areaScale = 1;\r\n\tlet stencilScale = 1;\r\n\tconst allowedScale = scale.factor && Math.abs(scale.factor - 1) > 1e-3;\r\n\r\n\tvisibleArea = applyMove(visibleArea, {\r\n\t\tleft: move.left || 0,\r\n\t\ttop: move.top || 0,\r\n\t});\r\n\r\n\tconst scaleRestrictions = {\r\n\t\tstencil: {\r\n\t\t\tminimum: Math.max(\r\n\t\t\t\tsizeRestrictions.minWidth ? sizeRestrictions.minWidth / coordinates.width : 0,\r\n\t\t\t\tsizeRestrictions.minHeight ? sizeRestrictions.minHeight / coordinates.height : 0,\r\n\t\t\t),\r\n\t\t\tmaximum: Math.min(\r\n\t\t\t\tsizeRestrictions.maxWidth ? sizeRestrictions.maxWidth / coordinates.width : Infinity,\r\n\t\t\t\tsizeRestrictions.maxHeight ? sizeRestrictions.maxHeight / coordinates.height : Infinity,\r\n\t\t\t\tmaxScale(coordinates, positionRestrictions),\r\n\t\t\t),\r\n\t\t},\r\n\t\tarea: {\r\n\t\t\tmaximum: maxScale(visibleArea, areaRestrictions),\r\n\t\t},\r\n\t};\r\n\r\n\t// If there is scaling then begin scale\r\n\tif (scale.factor && allowedScale) {\r\n\t\t// Determine scale factor\r\n\t\tif (scale.factor < 1) {\r\n\t\t\tstencilScale = Math.max(scale.factor, scaleRestrictions.stencil.minimum);\r\n\t\t\tif (stencilScale > 1) {\r\n\t\t\t\tstencilScale = 1;\r\n\t\t\t}\r\n\t\t} else if (scale.factor > 1) {\r\n\t\t\tstencilScale = Math.min(\r\n\t\t\t\tscale.factor,\r\n\t\t\t\tMath.min(scaleRestrictions.area.maximum, scaleRestrictions.stencil.maximum),\r\n\t\t\t);\r\n\t\t\tif (stencilScale < 1) {\r\n\t\t\t\tstencilScale = 1;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tif (stencilScale) {\r\n\t\t// Resize stencil with area as much is possible\r\n\t\tvisibleArea = applyScale(visibleArea, stencilScale, scale.center);\r\n\t}\r\n\r\n\tconst relativeCoordinates = {\r\n\t\tleft: originalCoordinates.left - originalVisibleArea.left,\r\n\t\tright:\r\n\t\t\toriginalVisibleArea.width +\r\n\t\t\toriginalVisibleArea.left -\r\n\t\t\t(originalCoordinates.width + originalCoordinates.left),\r\n\t\ttop: originalCoordinates.top - originalVisibleArea.top,\r\n\t\tbottom:\r\n\t\t\toriginalVisibleArea.height +\r\n\t\t\toriginalVisibleArea.top -\r\n\t\t\t(originalCoordinates.height + originalCoordinates.top),\r\n\t};\r\n\r\n\t// Move the area to fit to area limits:\r\n\tvisibleArea = applyMove(visibleArea, fit(visibleArea, areaRestrictions));\r\n\r\n\t// Move the area to fit to coordinates limits:\r\n\tvisibleArea = applyMove(\r\n\t\tvisibleArea,\r\n\t\tfit(visibleArea, {\r\n\t\t\tleft:\r\n\t\t\t\tpositionRestrictions.left !== undefined\r\n\t\t\t\t\t? positionRestrictions.left - relativeCoordinates.left * stencilScale\r\n\t\t\t\t\t: undefined,\r\n\t\t\ttop:\r\n\t\t\t\tpositionRestrictions.top !== undefined\r\n\t\t\t\t\t? positionRestrictions.top - relativeCoordinates.top * stencilScale\r\n\t\t\t\t\t: undefined,\r\n\t\t\tbottom:\r\n\t\t\t\tpositionRestrictions.bottom !== undefined\r\n\t\t\t\t\t? positionRestrictions.bottom + relativeCoordinates.bottom * stencilScale\r\n\t\t\t\t\t: undefined,\r\n\t\t\tright:\r\n\t\t\t\tpositionRestrictions.right !== undefined\r\n\t\t\t\t\t? positionRestrictions.right + relativeCoordinates.right * stencilScale\r\n\t\t\t\t\t: undefined,\r\n\t\t}),\r\n\t);\r\n\r\n\t// Set the same coordinates of stencil inside visible area\r\n\tcoordinates.width = coordinates.width * stencilScale;\r\n\tcoordinates.height = coordinates.height * stencilScale;\r\n\tcoordinates.left = visibleArea.left + relativeCoordinates.left * stencilScale;\r\n\tcoordinates.top = visibleArea.top + relativeCoordinates.top * stencilScale;\r\n\r\n\t// Resize only area if stencil can't be resized and stencil resize is disabled\r\n\tif (scale.factor && allowedScale && settings.stencil) {\r\n\t\tif (scale.factor > 1) {\r\n\t\t\tareaScale = Math.min(scaleRestrictions.area.maximum, scale.factor) / stencilScale;\r\n\t\t} else if (scale.factor < 1) {\r\n\t\t\tareaScale = Math.max(coordinates.height / visibleArea.height, scale.factor) / stencilScale;\r\n\t\t}\r\n\t\tvisibleArea = applyScale(\r\n\t\t\tvisibleArea,\r\n\t\t\tareaScale,\r\n\t\t\tgetCenter(coordinates),\r\n\t\t\tMath.pow(scale.factor > 1 ? scaleRestrictions.area.maximum : coordinates.height / visibleArea.height, 2),\r\n\t\t);\r\n\t\tvisibleArea = applyMove(visibleArea, fit(visibleArea, areaRestrictions));\r\n\t}\r\n\r\n\treturn {\r\n\t\tcoordinates,\r\n\t\tvisibleArea,\r\n\t};\r\n}\r\n","// This function returns the approximation size to width / height with respect to\r\n// restrictions and aspect ratio\r\nimport { AspectRatio, Size, SizeRestrictions } from '../typings';\r\nimport { ratio } from '../service';\r\n\r\ninterface CandidateSize extends Size {\r\n\t// Additional param to prevent double precision problems\r\n\tcorrectRatio?: boolean;\r\n}\r\n\r\ninterface ValidateSizeParams {\r\n\tsize: CandidateSize;\r\n\taspectRatio: AspectRatio;\r\n\tsizeRestrictions: SizeRestrictions;\r\n\tignoreMinimum?: boolean;\r\n}\r\nfunction validateSize(params: ValidateSizeParams): boolean {\r\n\tconst { size, aspectRatio, ignoreMinimum, sizeRestrictions } = params;\r\n\treturn Boolean(\r\n\t\t(size.correctRatio || (ratio(size) >= aspectRatio.minimum && ratio(size) <= aspectRatio.maximum)) &&\r\n\t\t\tsize.height <= sizeRestrictions.maxHeight &&\r\n\t\t\tsize.width <= sizeRestrictions.maxWidth &&\r\n\t\t\tsize.width &&\r\n\t\t\tsize.height &&\r\n\t\t\t(ignoreMinimum || (size.height >= sizeRestrictions.minHeight && size.width >= sizeRestrictions.minWidth)),\r\n\t);\r\n}\r\n\r\nfunction distance(a: Size, b: Size): number {\r\n\treturn Math.pow(a.width - b.width, 2) + Math.pow(a.height - b.height, 2);\r\n}\r\n\r\n// Limitations:\r\n// 1. Assume that maximum width and height always larger than minimum width and height\r\n// 2. Assume that aspectRatio.minimum < aspectRatio.maximum\r\n// If you break this limitations function could return null!\r\ninterface ApproximatedSizeParams {\r\n\twidth: number;\r\n\theight: number;\r\n\tsizeRestrictions: SizeRestrictions;\r\n\taspectRatio?: AspectRatio;\r\n}\r\nexport function approximatedSize(params: ApproximatedSizeParams): Size {\r\n\tconst { width, height, sizeRestrictions } = params;\r\n\r\n\tconst aspectRatio = {\r\n\t\tminimum: (params.aspectRatio && params.aspectRatio.minimum) || 0,\r\n\t\tmaximum: (params.aspectRatio && params.aspectRatio.maximum) || Infinity,\r\n\t};\r\n\r\n\tconst coordinates = {\r\n\t\twidth: Math.max(sizeRestrictions.minWidth, Math.min(sizeRestrictions.maxWidth, width)),\r\n\t\theight: Math.max(sizeRestrictions.minHeight, Math.min(sizeRestrictions.maxHeight, height)),\r\n\t};\r\n\r\n\tfunction findBestCandidate(candidates: CandidateSize[], ignoreMinimum = false): CandidateSize | null {\r\n\t\treturn candidates.reduce<CandidateSize | null>((minimum: CandidateSize | null, size: CandidateSize) => {\r\n\t\t\tif (validateSize({ size, aspectRatio, sizeRestrictions, ignoreMinimum })) {\r\n\t\t\t\treturn !minimum || distance(size, { width, height }) < distance(minimum, { width, height })\r\n\t\t\t\t\t? size\r\n\t\t\t\t\t: minimum;\r\n\t\t\t} else {\r\n\t\t\t\treturn minimum;\r\n\t\t\t}\r\n\t\t}, null);\r\n\t}\r\n\r\n\tconst candidates: CandidateSize[] = [];\r\n\r\n\tif (aspectRatio) {\r\n\t\t[aspectRatio.minimum, aspectRatio.maximum].forEach((ratio) => {\r\n\t\t\tif (ratio) {\r\n\t\t\t\tcandidates.push(\r\n\t\t\t\t\t{ width: coordinates.width, height: coordinates.width / ratio, correctRatio: true },\r\n\t\t\t\t\t{ width: coordinates.height * ratio, height: coordinates.height, correctRatio: true },\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tif (validateSize({ size: coordinates, aspectRatio, sizeRestrictions })) {\r\n\t\tcandidates.push(coordinates);\r\n\t}\r\n\r\n\tconst candidate = findBestCandidate(candidates) || findBestCandidate(candidates, true);\r\n\r\n\treturn (\r\n\t\tcandidate && {\r\n\t\t\twidth: candidate.width,\r\n\t\t\theight: candidate.height,\r\n\t\t}\r\n\t);\r\n}\r\n","import {\r\n\tAspectRatio,\r\n\tCoordinates,\r\n\tDiff,\r\n\tIntersections,\r\n\tLimits,\r\n\tMoveDirections,\r\n\tPoint,\r\n\tResizeDirections,\r\n\tSize,\r\n\tSizeRestrictions,\r\n} from './typings';\r\nimport { ALL_DIRECTIONS } from './constants';\r\n\r\nexport function isEqual(a: any, b: any, properties?: string[]): boolean {\r\n\tproperties = properties || ['width', 'height', 'left', 'top'];\r\n\treturn !properties.some((property) => a[property] !== b[property]);\r\n}\r\n\r\nexport function toLimits(object: Coordinates): Limits {\r\n\treturn {\r\n\t\tleft: object.left,\r\n\t\ttop: object.top,\r\n\t\tright: object.left + object.width,\r\n\t\tbottom: object.top + object.height,\r\n\t};\r\n}\r\n\r\nexport function diff(firstObject: Point, secondObject: Point): Diff {\r\n\treturn {\r\n\t\tleft: firstObject.left - secondObject.left,\r\n\t\ttop: firstObject.top - secondObject.top,\r\n\t};\r\n}\r\n\r\nexport function getCenter(object: Coordinates): Point {\r\n\treturn {\r\n\t\tleft: object.left + object.width / 2,\r\n\t\ttop: object.top + object.height / 2,\r\n\t};\r\n}\r\n\r\nexport function getIntersections(object: Coordinates, limits: Limits): Intersections {\r\n\tconst intersections: Intersections = {\r\n\t\tleft: 0,\r\n\t\ttop: 0,\r\n\t\tright: 0,\r\n\t\tbottom: 0,\r\n\t};\r\n\tALL_DIRECTIONS.forEach((direction) => {\r\n\t\tconst areaLimit = limits[direction];\r\n\t\tconst objectLimit = toLimits(object)[direction];\r\n\t\tif (areaLimit !== undefined && objectLimit !== undefined) {\r\n\t\t\tif (direction === 'left' || direction === 'top') {\r\n\t\t\t\tintersections[direction] = Math.max(0, areaLimit - objectLimit);\r\n\t\t\t} else {\r\n\t\t\t\tintersections[direction] = Math.max(0, objectLimit - areaLimit);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tintersections[direction] = 0;\r\n\t\t}\r\n\t});\r\n\treturn intersections;\r\n}\r\n\r\nexport function applyDirections(coordinates: Coordinates, directions: ResizeDirections): Coordinates {\r\n\treturn {\r\n\t\tleft: coordinates.left - directions.left,\r\n\t\ttop: coordinates.top - directions.top,\r\n\t\twidth: coordinates.width + directions.left + directions.right,\r\n\t\theight: coordinates.height + directions.top + directions.bottom,\r\n\t};\r\n}\r\n\r\nexport function inverseMove(directions: MoveDirections): MoveDirections {\r\n\treturn {\r\n\t\tleft: -directions.left,\r\n\t\ttop: -directions.top,\r\n\t};\r\n}\r\n\r\nexport function applyMove(object: Coordinates, move: MoveDirections): Coordinates {\r\n\treturn {\r\n\t\t...object,\r\n\t\tleft: object.left + move.left,\r\n\t\ttop: object.top + move.top,\r\n\t};\r\n}\r\n\r\nexport function applyScale(object: Coordinates, scaleFactor: number, center?: Point, progress?: number): Coordinates {\r\n\tif (center) {\r\n\t\tconst currentCenter = getCenter(object);\r\n\t\treturn {\r\n\t\t\twidth: object.width * scaleFactor,\r\n\t\t\theight: object.height * scaleFactor,\r\n\t\t\tleft:\r\n\t\t\t\tobject.left +\r\n\t\t\t\t(object.width * (1 - scaleFactor)) / 2 +\r\n\t\t\t\t(center.left - currentCenter.left) * (progress || 1 - scaleFactor),\r\n\t\t\ttop:\r\n\t\t\t\tobject.top +\r\n\t\t\t\t(object.height * (1 - scaleFactor)) / 2 +\r\n\t\t\t\t(center.top - currentCenter.top) * (progress || 1 - scaleFactor),\r\n\t\t};\r\n\t} else {\r\n\t\treturn {\r\n\t\t\twidth: object.width * scaleFactor,\r\n\t\t\theight: object.height * scaleFactor,\r\n\t\t\tleft: object.left + (object.width * (1 - scaleFactor)) / 2,\r\n\t\t\ttop: object.top + (object.height * (1 - scaleFactor)) / 2,\r\n\t\t};\r\n\t}\r\n}\r\n\r\nexport function ratio(object: Size): number {\r\n\treturn object.width / object.height;\r\n}\r\n\r\nexport function maxScale(object: Coordinates, area: Limits): number {\r\n\treturn Math.min(\r\n\t\tarea.right !== undefined && area.left !== undefined ? (area.right - area.left) / object.width : Infinity,\r\n\t\tarea.bottom !== undefined && area.top !== undefined ? (area.bottom - area.top) / object.height : Infinity,\r\n\t);\r\n}\r\n\r\n// Move object to correspond limits\r\nexport function fit(object: Coordinates, limits: Limits): MoveDirections {\r\n\tconst directions = {\r\n\t\tleft: 0,\r\n\t\ttop: 0,\r\n\t};\r\n\r\n\tconst intersection = getIntersections(object, limits);\r\n\r\n\tif (intersection.left && intersection.left > 0) {\r\n\t\tdirections.left = intersection.left;\r\n\t} else if (intersection.right && intersection.right > 0) {\r\n\t\tdirections.left = -intersection.right;\r\n\t}\r\n\tif (intersection.top && intersection.top > 0) {\r\n\t\tdirections.top = intersection.top;\r\n\t} else if (intersection.bottom && intersection.bottom > 0) {\r\n\t\tdirections.top = -intersection.bottom;\r\n\t}\r\n\r\n\treturn directions;\r\n}\r\n\r\nexport function getBrokenRatio(currentAspectRatio: number, aspectRatio: AspectRatio): number | undefined {\r\n\tlet ratioBroken;\r\n\tif (aspectRatio.minimum && currentAspectRatio < aspectRatio.minimum) {\r\n\t\tratioBroken = aspectRatio.minimum;\r\n\t} else if (aspectRatio.maximum && currentAspectRatio > aspectRatio.maximum) {\r\n\t\tratioBroken = aspectRatio.maximum;\r\n\t}\r\n\treturn ratioBroken;\r\n}\r\n\r\nexport function fitSize(firstSize: Size, secondSize: Size): Size {\r\n\tconst firstRatio = ratio(firstSize);\r\n\tconst secondRatio = ratio(secondSize);\r\n\r\n\tif (secondSize.width < Infinity && secondSize.height < Infinity) {\r\n\t\tif (firstRatio > secondRatio) {\r\n\t\t\treturn {\r\n\t\t\t\twidth: secondSize.width,\r\n\t\t\t\theight: secondSize.width / firstRatio,\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\treturn {\r\n\t\t\t\twidth: secondSize.height * firstRatio,\r\n\t\t\t\theight: secondSize.height,\r\n\t\t\t};\r\n\t\t}\r\n\t} else if (secondSize.width < Infinity) {\r\n\t\treturn {\r\n\t\t\twidth: secondSize.width,\r\n\t\t\theight: secondSize.width / firstRatio,\r\n\t\t};\r\n\t} else if (secondSize.height < Infinity) {\r\n\t\treturn {\r\n\t\t\twidth: secondSize.height * firstRatio,\r\n\t\t\theight: secondSize.height,\r\n\t\t};\r\n\t} else {\r\n\t\treturn firstSize;\r\n\t}\r\n}\r\n\r\nexport function fitToLimits(coordinates: Coordinates, area: Limits) {\r\n\treturn applyMove(coordinates, fit(coordinates, area));\r\n}\r\n\r\nexport function limitsToSize(area: Limits) {\r\n\treturn {\r\n\t\twidth: area.right !== undefined && area.left !== undefined ? area.right - area.left : Infinity,\r\n\t\theight: area.bottom !== undefined && area.top !== undefined ? area.bottom - area.top : Infinity,\r\n\t};\r\n}\r\n\r\nexport function limitSizeRestrictions(sizeRestrictions: SizeRestrictions, object: Size) {\r\n\treturn {\r\n\t\t...sizeRestrictions,\r\n\t\tminWidth: Math.min(object.width, sizeRestrictions.minWidth),\r\n\t\tminHeight: Math.min(object.height, sizeRestrictions.minHeight),\r\n\t\tmaxWidth: Math.min(object.width, sizeRestrictions.maxWidth),\r\n\t\tmaxHeight: Math.min(object.height, sizeRestrictions.maxHeight),\r\n\t};\r\n}\r\n\r\nexport function joinLimits(a: Limits, b: Limits, intersection = true): Limits {\r\n\tconst limits: Limits = {};\r\n\tALL_DIRECTIONS.forEach((direction) => {\r\n\t\tconst firstDirection = a[direction];\r\n\t\tconst secondDirection = b[direction];\r\n\t\tif (firstDirection !== undefined && secondDirection !== undefined) {\r\n\t\t\tif (direction === 'left' || direction === 'top') {\r\n\t\t\t\tlimits[direction] = intersection\r\n\t\t\t\t\t? Math.max(firstDirection, secondDirection)\r\n\t\t\t\t\t: Math.min(firstDirection, secondDirection);\r\n\t\t\t} else {\r\n\t\t\t\tlimits[direction] = intersection\r\n\t\t\t\t\t? Math.min(firstDirection, secondDirection)\r\n\t\t\t\t\t: Math.max(firstDirection, secondDirection);\r\n\t\t\t}\r\n\t\t} else if (secondDirection !== undefined) {\r\n\t\t\tlimits[direction] = secondDirection;\r\n\t\t} else if (firstDirection !== undefined) {\r\n\t\t\tlimits[direction] = firstDirection;\r\n\t\t}\r\n\t});\r\n\treturn limits;\r\n}\r\n\r\nexport function unionLimits(a: Limits, b: Limits) {\r\n\treturn joinLimits(a, b, false);\r\n}\r\n\r\nexport function intersectionLimits(a: Limits, b: Limits) {\r\n\treturn joinLimits(a, b, true);\r\n}\r\n","/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing. The function also has a property 'clear' \n * that is a function which will clear the timer to prevent previously scheduled executions. \n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {Function} function to wrap\n * @param {Number} timeout in ms (`100`)\n * @param {Boolean} whether to execute at the beginning (`false`)\n * @api public\n */\nfunction debounce(func, wait, immediate){\n  var timeout, args, context, timestamp, result;\n  if (null == wait) wait = 100;\n\n  function later() {\n    var last = Date.now() - timestamp;\n\n    if (last < wait && last >= 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      if (!immediate) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n    }\n  };\n\n  var debounced = function(){\n    context = this;\n    args = arguments;\n    timestamp = Date.now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n\n  debounced.clear = function() {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n  \n  debounced.flush = function() {\n    if (timeout) {\n      result = func.apply(context, args);\n      context = args = null;\n      \n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n\n  return debounced;\n};\n\n// Adds compatibility for ES modules\ndebounce.debounce = debounce;\n\nmodule.exports = debounce;\n","type Protocol = 'http' | 'https';\r\n\r\nexport function directionNames(hDirection, vDirection) {\r\n\tlet name, classname;\r\n\tif (hDirection && vDirection) {\r\n\t\tname = `${hDirection}${vDirection[0].toUpperCase()}${vDirection.slice(1)}`;\r\n\t\tclassname = `${hDirection}-${vDirection}`;\r\n\t} else {\r\n\t\tname = hDirection || vDirection;\r\n\t\tclassname = hDirection || vDirection;\r\n\t}\r\n\treturn { name, classname };\r\n}\r\n\r\nexport function isLocal(url: string) {\r\n\treturn /^data:/.test(url) || /^blob:/.test(url);\r\n}\r\n\r\nexport function isCrossOriginURL(url: string) {\r\n\tif (isLocal(url)) {\r\n\t\treturn false;\r\n\t}\r\n\tconst pageLocation = window.location;\r\n\tconst URL_HOST_PATTERN = /(\\w+:)?(?:\\/\\/)([\\w.-]+)?(?::(\\d+))?\\/?/;\r\n\tconst urlMatch = URL_HOST_PATTERN.exec(url) || [];\r\n\tconst urlparts = {\r\n\t\tprotocol: urlMatch[1] || '',\r\n\t\thost: urlMatch[2] || '',\r\n\t\tport: urlMatch[3] || '',\r\n\t};\r\n\r\n\tconst defaultPort = (protocol: Protocol) => {\r\n\t\tif (protocol === 'http') {\r\n\t\t\treturn 80;\r\n\t\t} else {\r\n\t\t\treturn 433;\r\n\t\t}\r\n\t};\r\n\r\n\tconst portOf = (location: any) => {\r\n\t\treturn location.port || defaultPort((location.protocol || pageLocation.protocol) as Protocol);\r\n\t};\r\n\r\n\treturn !(\r\n\t\t(!urlparts.protocol && !urlparts.host && !urlparts.port) ||\r\n\t\tBoolean(\r\n\t\t\turlparts.protocol &&\r\n\t\t\t\turlparts.protocol == pageLocation.protocol &&\r\n\t\t\t\turlparts.host &&\r\n\t\t\t\turlparts.host == pageLocation.host &&\r\n\t\t\t\turlparts.host &&\r\n\t\t\t\tportOf(urlparts) == portOf(pageLocation),\r\n\t\t)\r\n\t);\r\n}\r\n\r\nexport function isFunction(obj: any) {\r\n\treturn !!(obj && obj.constructor && obj.call && obj.apply);\r\n}\r\n\r\nexport function isUndefined(obj: any): boolean {\r\n\treturn obj === undefined;\r\n}\r\n\r\nexport function isObject(obj) {\r\n\treturn typeof obj === 'object' && obj !== null;\r\n}\r\n\r\nexport function getSettings<T extends {}>(param, defaultParams?:T ) {\r\n\tlet result = {\r\n\t\tenabled: Boolean(param),\r\n\t\t...defaultParams,\r\n\t};\r\n\tif (isObject(param)) {\r\n\t\tresult = { ...result, ...param };\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nexport function parseNumber(number) {\r\n\tconst parsedNumber = Number(number);\r\n\tif (Number.isNaN(parsedNumber)) {\r\n\t\treturn number;\r\n\t} else {\r\n\t\treturn parsedNumber;\r\n\t}\r\n}\r\n\r\nexport function replacedProp(value, oldName, currentName) {\r\n\tif (!isEmpty(value) && process.env.NODE_ENV !== 'production') {\r\n\t\tconsole.warn(`Warning: prop \"${oldName}\" is deprecated, use \"${currentName}\" instead. Value:`, value);\r\n\t}\r\n\treturn true;\r\n}\r\n\r\nexport function isEmpty(obj) {\r\n\treturn (!obj || Object.keys(obj).length === 0) && typeof obj !== 'function';\r\n}\r\n\r\nexport function isLoadedImage(image) {\r\n\treturn Boolean(image.naturalWidth);\r\n}\r\n\r\nexport function distance(firstPoint, secondPoint) {\r\n\treturn Math.sqrt(Math.pow(firstPoint.x - secondPoint.x, 2) + Math.pow(firstPoint.y - secondPoint.y, 2));\r\n}\r\n","import { MoveEvent } from '../events';\r\nimport { Coordinates, PositionRestrictions } from '../typings';\r\nimport { applyMove, fit } from '../service';\r\n\r\nexport interface MoveParams {\r\n\tevent: MoveEvent;\r\n\tcoordinates: Coordinates;\r\n\tpositionRestrictions: PositionRestrictions;\r\n}\r\n\r\nexport function move(params: MoveParams): Coordinates {\r\n\tconst { event, coordinates, positionRestrictions = {} } = params;\r\n\r\n\tconst movedCoordinates = applyMove(coordinates, event.directions);\r\n\r\n\treturn applyMove(movedCoordinates, fit(movedCoordinates, positionRestrictions));\r\n}\r\n","import { AspectRatio, PositionRestrictions, SizeRestrictions, Transform, Coordinates, Size } from '../typings';\r\nimport { MoveEvent } from '../events';\r\nimport { approximatedSize } from './approximatedSize';\r\nimport { isUndefined } from '../utils';\r\nimport { move } from './move';\r\n\r\ninterface ApplyTransformParams {\r\n\tcoordinates: Coordinates;\r\n\ttransform: Transform | Transform[];\r\n\tsizeRestrictions: SizeRestrictions;\r\n\tpositionRestrictions: PositionRestrictions;\r\n\timageSize: Size;\r\n\taspectRatio?: AspectRatio;\r\n}\r\n\r\nexport function applyTransform(params: ApplyTransformParams) {\r\n\tconst {\r\n\t\tcoordinates: initialCoordinates,\r\n\t\ttransform,\r\n\t\timageSize,\r\n\t\tsizeRestrictions,\r\n\t\tpositionRestrictions,\r\n\t\taspectRatio,\r\n\t} = params;\r\n\r\n\tconst moveAlgorithm = (prevCoordinates, newCoordinates) => {\r\n\t\treturn move({\r\n\t\t\tcoordinates: prevCoordinates,\r\n\t\t\tpositionRestrictions,\r\n\t\t\tevent: new MoveEvent({\r\n\t\t\t\tleft: newCoordinates.left - prevCoordinates.left,\r\n\t\t\t\ttop: newCoordinates.top - prevCoordinates.top,\r\n\t\t\t}),\r\n\t\t});\r\n\t};\r\n\r\n\tconst resizeAlgorithm = (prevCoordinates, newCoordinates) => {\r\n\t\tlet coordinates = {\r\n\t\t\t...prevCoordinates,\r\n\t\t\t...approximatedSize({\r\n\t\t\t\twidth: newCoordinates.width,\r\n\t\t\t\theight: newCoordinates.height,\r\n\t\t\t\tsizeRestrictions,\r\n\t\t\t\taspectRatio,\r\n\t\t\t}),\r\n\t\t\tleft: 0,\r\n\t\t\ttop: 0,\r\n\t\t};\r\n\r\n\t\treturn moveAlgorithm(coordinates, {\r\n\t\t\tleft: prevCoordinates.left,\r\n\t\t\ttop: prevCoordinates.top,\r\n\t\t});\r\n\t};\r\n\r\n\tlet coordinates = { ...initialCoordinates };\r\n\r\n\tconst transforms = Array.isArray(transform) ? transform : [transform];\r\n\r\n\ttransforms.forEach((transform) => {\r\n\t\tlet changes: Partial<Coordinates> = {};\r\n\t\tif (typeof transform === 'function') {\r\n\t\t\tchanges = transform({ ...coordinates }, imageSize);\r\n\t\t} else {\r\n\t\t\tchanges = transform;\r\n\t\t}\r\n\r\n\t\tif (!isUndefined(changes.width) || !isUndefined(changes.height)) {\r\n\t\t\tcoordinates = resizeAlgorithm(coordinates, { ...coordinates, ...changes });\r\n\t\t}\r\n\t\tif (!isUndefined(changes.left) || !isUndefined(changes.top)) {\r\n\t\t\tcoordinates = moveAlgorithm(coordinates, { ...coordinates, ...changes });\r\n\t\t}\r\n\t});\r\n\r\n\treturn coordinates;\r\n}\r\n","import { applyMove, applyScale, fit, inverseMove, maxScale, toLimits } from '../service';\r\nimport { Coordinates, AreaRestrictions, VisibleArea } from '../typings';\r\n\r\n// The main point of this feature is calculating the needed position of stencil and parameters of world transforms\r\n// Real coordinates don't changes here\r\ninterface AutoZoomParams {\r\n\tcoordinates: Coordinates;\r\n\tvisibleArea: VisibleArea;\r\n\tareaRestrictions: AreaRestrictions;\r\n}\r\ninterface AutoZoomResult {\r\n\tvisibleArea: VisibleArea;\r\n}\r\nexport function autoZoom(params: AutoZoomParams): AutoZoomResult {\r\n\tconst { coordinates: originalCoordinates, visibleArea: originalVisibleArea, areaRestrictions } = params;\r\n\r\n\tlet visibleArea = { ...originalVisibleArea };\r\n\tconst coordinates = { ...originalCoordinates };\r\n\r\n\tconst widthIntersections = Math.max(0, coordinates.width - visibleArea.width);\r\n\tconst heightIntersections = Math.max(0, coordinates.height - visibleArea.height);\r\n\r\n\tif (widthIntersections > heightIntersections) {\r\n\t\tvisibleArea = applyScale(\r\n\t\t\tvisibleArea,\r\n\t\t\tMath.min(coordinates.width / visibleArea.width, maxScale(visibleArea, areaRestrictions)),\r\n\t\t);\r\n\t} else if (heightIntersections > widthIntersections) {\r\n\t\tvisibleArea = applyScale(\r\n\t\t\tvisibleArea,\r\n\t\t\tMath.min(coordinates.height / visibleArea.height, maxScale(visibleArea, areaRestrictions)),\r\n\t\t);\r\n\t}\r\n\r\n\tvisibleArea = applyMove(visibleArea, inverseMove(fit(coordinates, toLimits(visibleArea))));\r\n\r\n\tvisibleArea = applyMove(visibleArea, fit(visibleArea, areaRestrictions));\r\n\r\n\treturn {\r\n\t\tvisibleArea,\r\n\t};\r\n}\r\n","import { Boundaries, Size } from '../typings';\r\n\r\nexport interface DefaultBoundariesParams {\r\n\tcropper: HTMLElement;\r\n\timageSize: Size;\r\n}\r\nexport function fitBoundaries({ cropper, imageSize }: DefaultBoundariesParams): Boundaries {\r\n\tconst areaHeight = cropper.clientHeight;\r\n\tconst areaWidth = cropper.clientWidth;\r\n\r\n\tlet currentHeight = areaHeight;\r\n\tlet currentWidth = (imageSize.width * areaHeight) / imageSize.height;\r\n\r\n\tif (currentWidth > areaWidth) {\r\n\t\tcurrentWidth = areaWidth;\r\n\t\tcurrentHeight = (imageSize.height * areaWidth) / imageSize.width;\r\n\t}\r\n\r\n\treturn {\r\n\t\twidth: currentWidth,\r\n\t\theight: currentHeight,\r\n\t};\r\n}\r\nexport function fillBoundaries({ cropper }: DefaultBoundariesParams): Boundaries {\r\n\treturn {\r\n\t\twidth: cropper.clientWidth,\r\n\t\theight: cropper.clientHeight,\r\n\t};\r\n}\r\n","import { AspectRatio, Boundaries, Falsy, ImageSize, Size, SizeRestrictions, VisibleArea } from '../typings';\nimport { approximatedSize } from './approximatedSize';\nimport { ratio } from '../service';\n\ninterface DefaultSizeBasicParams {\n\taspectRatio: AspectRatio;\n\tboundaries: Boundaries;\n\tsizeRestrictions: SizeRestrictions;\n}\n\ninterface ImageDefaultSizeParams extends DefaultSizeBasicParams {\n\timageSize: ImageSize;\n\tvisibleArea?: VisibleArea | Falsy;\n}\n\ninterface VisibleAreaDefaultSizeParams extends DefaultSizeBasicParams {\n\timageSize?: ImageSize | Falsy;\n\tvisibleArea: VisibleArea;\n}\n\nexport type DefaultSizeParams = VisibleAreaDefaultSizeParams | ImageDefaultSizeParams\n\nexport function defaultSize({\n\timageSize,\n\tvisibleArea,\n\tboundaries,\n\taspectRatio,\n\tsizeRestrictions,\n}: DefaultSizeParams): Size {\n\tconst area = (visibleArea || imageSize) as Size;\n\n\tconst size =\n\t\tboundaries.width > boundaries.height\n\t\t\t? {\n\t\t\t\t\twidth: area.width * 0.8,\n\t\t\t\t\theight: (area.width * 0.8) / ratio(boundaries),\n\t\t\t  }\n\t\t\t: {\n\t\t\t\t\theight: area.height * 0.8,\n\t\t\t\t\twidth: area.height * 0.8 * ratio(boundaries),\n\t\t\t  };\n\n\treturn approximatedSize({\n\t\t...size,\n\t\taspectRatio,\n\t\tsizeRestrictions: sizeRestrictions,\n\t});\n}\n","import { Size, VisibleArea, Coordinates, AreaRestrictions, Limits, Falsy } from '../typings';\nimport { ratio, toLimits, intersectionLimits, fitToLimits, getIntersections, fitSize, limitsToSize } from '../service';\n\nexport interface DefaultVisibleAreaParams {\n\timageSize: Size;\n\tboundaries: Size;\n\tcoordinates?: Coordinates | Falsy;\n\tareaRestrictions: AreaRestrictions;\n}\nexport function defaultVisibleArea(params: DefaultVisibleAreaParams): VisibleArea {\n\tconst { areaRestrictions, coordinates, imageSize, boundaries } = params;\n\n\tconst boundaryRatio = ratio(boundaries);\n\n\tif (coordinates) {\n\t\tconst reference = {\n\t\t\theight: Math.max(coordinates.height, imageSize.height),\n\t\t\twidth: Math.max(coordinates.width, imageSize.width),\n\t\t};\n\n\t\tconst referenceRatio = ratio(reference);\n\n\t\tconst areaProperties = fitSize(\n\t\t\t{\n\t\t\t\twidth: referenceRatio > boundaryRatio ? reference.width : reference.height * boundaryRatio,\n\t\t\t\theight: referenceRatio > boundaryRatio ? reference.width / boundaryRatio : reference.height,\n\t\t\t},\n\t\t\tlimitsToSize(areaRestrictions),\n\t\t);\n\n\t\tconst visibleArea = {\n\t\t\tleft: coordinates.left + coordinates.width / 2 - areaProperties.width / 2,\n\t\t\ttop: coordinates.top + coordinates.height / 2 - areaProperties.height / 2,\n\t\t\twidth: areaProperties.width,\n\t\t\theight: areaProperties.height,\n\t\t};\n\n\t\tconst coordinatesIntersection = getIntersections(\n\t\t\tcoordinates,\n\t\t\ttoLimits({\n\t\t\t\tleft: 0,\n\t\t\t\ttop: 0,\n\t\t\t\t...imageSize,\n\t\t\t}),\n\t\t);\n\n\t\tconst limits: Limits = {};\n\n\t\tif (!coordinatesIntersection.left && !coordinatesIntersection.right && visibleArea.width <= imageSize.width) {\n\t\t\tlimits.left = 0;\n\t\t\tlimits.right = imageSize.width;\n\t\t}\n\n\t\tif (!coordinatesIntersection.top && !coordinatesIntersection.bottom && visibleArea.height <= imageSize.height) {\n\t\t\tlimits.top = 0;\n\t\t\tlimits.bottom = imageSize.height;\n\t\t}\n\n\t\treturn fitToLimits(visibleArea, intersectionLimits(limits, areaRestrictions));\n\t} else {\n\t\tconst imageRatio = ratio(imageSize);\n\n\t\tconst areaProperties = {\n\t\t\theight: imageRatio > boundaryRatio ? imageSize.height : imageSize.width / boundaryRatio,\n\t\t\twidth: imageRatio > boundaryRatio ? imageSize.height * boundaryRatio : imageSize.width,\n\t\t};\n\n\t\treturn {\n\t\t\tleft: imageSize.width / 2 - areaProperties.width / 2,\n\t\t\ttop: imageSize.height / 2 - areaProperties.height / 2,\n\t\t\twidth: areaProperties.width,\n\t\t\theight: areaProperties.height,\n\t\t};\n\t}\n}\n","import { AspectRatio, Coordinates, PositionRestrictions, SizeRestrictions, VisibleArea } from '../typings';\r\nimport { approximatedSize } from './approximatedSize';\r\nimport { applyMove, diff, fit, getCenter, intersectionLimits, toLimits } from '../service';\r\n\r\nexport interface FitCoordinatesParams {\r\n\tvisibleArea: VisibleArea;\r\n\tcoordinates: Coordinates;\r\n\taspectRatio: AspectRatio;\r\n\tsizeRestrictions: SizeRestrictions;\r\n\tpositionRestrictions: PositionRestrictions;\r\n}\r\n\r\nexport function fitCoordinates(params: FitCoordinatesParams): Coordinates {\r\n\tconst {\r\n\t\tvisibleArea,\r\n\t\tcoordinates: previousCoordinates,\r\n\t\taspectRatio,\r\n\t\tsizeRestrictions,\r\n\t\tpositionRestrictions,\r\n\t} = params;\r\n\r\n\tlet coordinates = {\r\n\t\t...previousCoordinates,\r\n\t\t...approximatedSize({\r\n\t\t\twidth: previousCoordinates.width,\r\n\t\t\theight: previousCoordinates.height,\r\n\t\t\taspectRatio,\r\n\t\t\tsizeRestrictions: {\r\n\t\t\t\tmaxWidth: visibleArea.width,\r\n\t\t\t\tmaxHeight: visibleArea.height,\r\n\t\t\t\tminHeight: Math.min(visibleArea.height, sizeRestrictions.minHeight),\r\n\t\t\t\tminWidth: Math.min(visibleArea.width, sizeRestrictions.minWidth),\r\n\t\t\t},\r\n\t\t}),\r\n\t};\r\n\r\n\tcoordinates = applyMove(coordinates, diff(getCenter(previousCoordinates), getCenter(coordinates)));\r\n\r\n\tcoordinates = applyMove(\r\n\t\tcoordinates,\r\n\t\tfit(coordinates, intersectionLimits(toLimits(visibleArea), positionRestrictions)),\r\n\t);\r\n\r\n\treturn coordinates;\r\n}\r\n","import { Coordinates, Limits } from '../typings';\r\nimport { joinLimits } from '../service';\r\nimport { toLimits } from '../service';\r\n\r\nexport function limitBy(limits: Limits, object: Coordinates): Limits {\r\n\treturn joinLimits(limits, toLimits(object));\r\n}\r\n","import { ManipulateImageEvent, MoveEvent, ResizeEvent } from '../events';\r\nimport { VisibleArea } from '../typings';\r\nimport { ALL_DIRECTIONS, MAIN_DIRECTIONS } from '../constants';\r\n\r\ninterface NormalizeEventParams {\r\n\tevent: ResizeEvent | MoveEvent | ManipulateImageEvent;\r\n\tvisibleArea: VisibleArea;\r\n\tcoefficient: number;\r\n}\r\nexport function normalizeEvent({ event, visibleArea, coefficient }: NormalizeEventParams) {\r\n\tif (event.type === 'manipulateImage') {\r\n\t\treturn {\r\n\t\t\t...event,\r\n\t\t\tmove: {\r\n\t\t\t\tleft: event.move && event.move.left ? coefficient * event.move.left : 0,\r\n\t\t\t\ttop: event.move && event.move.top ? coefficient * event.move.top : 0,\r\n\t\t\t},\r\n\t\t\tscale: {\r\n\t\t\t\tfactor: event.scale && event.scale.factor ? event.scale.factor : 1,\r\n\t\t\t\tcenter:\r\n\t\t\t\t\tevent.scale && event.scale.center\r\n\t\t\t\t\t\t? {\r\n\t\t\t\t\t\t\t\tleft: event.scale.center.left * coefficient + visibleArea.left,\r\n\t\t\t\t\t\t\t\ttop: event.scale.center.top * coefficient + visibleArea.top,\r\n\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t: null,\r\n\t\t\t},\r\n\t\t};\r\n\t} else if (event.type === 'resize') {\r\n\t\tconst normalizedEvent = { ...event, directions: { ...event.directions } };\r\n\t\tALL_DIRECTIONS.forEach((direction) => {\r\n\t\t\tnormalizedEvent.directions[direction] *= coefficient;\r\n\t\t});\r\n\t\treturn normalizedEvent;\r\n\t} else if (event.type === 'move') {\r\n\t\tconst normalizedEvent = { ...event, directions: { ...event.directions } };\r\n\t\tMAIN_DIRECTIONS.forEach((direction) => {\r\n\t\t\tnormalizedEvent.directions[direction] *= coefficient;\r\n\t\t});\r\n\t\treturn normalizedEvent;\r\n\t} else {\r\n\t\treturn event;\r\n\t}\r\n}\r\n","import { Boundaries, ImageRestriction, PositionRestrictions, Size, SizeRestrictions } from '../typings';\r\nimport { fitSize } from '../service';\r\n\r\ninterface RefineSizeRestrictionsParams {\r\n\tsizeRestrictions: Partial<SizeRestrictions>;\r\n\tpositionRestrictions: PositionRestrictions;\r\n\tboundaries: Boundaries;\r\n\timageSize: Size;\r\n\timageRestriction: ImageRestriction;\r\n}\r\nexport function refineSizeRestrictions({\r\n\tsizeRestrictions,\r\n\timageSize,\r\n\tboundaries,\r\n\tpositionRestrictions,\r\n\timageRestriction = 'none',\r\n}: RefineSizeRestrictionsParams) {\r\n\t// User can forget to set some of restrictions, so we should init them by default values\r\n\tconst restrictions = {\r\n\t\t...sizeRestrictions,\r\n\t\tminWidth: sizeRestrictions.minWidth !== undefined ? sizeRestrictions.minWidth : 0,\r\n\t\tminHeight: sizeRestrictions.minHeight !== undefined ? sizeRestrictions.minHeight : 0,\r\n\t\tmaxWidth: sizeRestrictions.maxWidth !== undefined ? sizeRestrictions.maxWidth : Infinity,\r\n\t\tmaxHeight: sizeRestrictions.maxHeight !== undefined ? sizeRestrictions.maxHeight : Infinity,\r\n\t};\r\n\r\n\t// The situation, when stencil can't be positioned in cropper due to positionRestrictions should be avoided\r\n\tif (positionRestrictions.left !== undefined && positionRestrictions.right !== undefined) {\r\n\t\trestrictions.maxWidth = Math.min(restrictions.maxWidth, positionRestrictions.right - positionRestrictions.left);\r\n\t}\r\n\tif (positionRestrictions.bottom !== undefined && positionRestrictions.top !== undefined) {\r\n\t\trestrictions.maxHeight = Math.min(\r\n\t\t\trestrictions.maxHeight,\r\n\t\t\tpositionRestrictions.bottom - positionRestrictions.top,\r\n\t\t);\r\n\t}\r\n\r\n\t// The situation when stencil larger than maximum visible area or image should be avoided if imageRestriction != 'none':\r\n\tif (imageRestriction !== 'none') {\r\n\t\tconst areaMaximum = fitSize(boundaries, imageSize);\r\n\t\tconst maxWidth = imageRestriction === 'area' ? areaMaximum.width : imageSize.width;\r\n\t\tconst maxHeight = imageRestriction === 'area' ? areaMaximum.height : imageSize.height;\r\n\t\tif (!restrictions.maxWidth || restrictions.maxWidth > maxWidth) {\r\n\t\t\trestrictions.maxWidth = maxWidth;\r\n\t\t}\r\n\t\tif (!restrictions.maxHeight || restrictions.maxHeight > maxHeight) {\r\n\t\t\trestrictions.maxHeight = maxHeight;\r\n\t\t}\r\n\t}\r\n\r\n\t// Process the border cases when minimum height / width larger than maximum height / width\r\n\tif (restrictions.minWidth > restrictions.maxWidth) {\r\n\t\tif (process.env.NODE_ENV !== 'production') {\r\n\t\t\tconsole.warn(\r\n\t\t\t\t`Warning: maximum width (${restrictions.maxWidth}px) fewer that the minimum width (${restrictions.minWidth}px). It is set equal to the minimum width and width resizing was blocked`,\r\n\t\t\t);\r\n\t\t}\r\n\t\trestrictions.minWidth = restrictions.maxWidth;\r\n\t\trestrictions.widthFrozen = true;\r\n\t}\r\n\r\n\tif (restrictions.minHeight > restrictions.maxHeight) {\r\n\t\tif (process.env.NODE_ENV !== 'production') {\r\n\t\t\tconsole.warn(\r\n\t\t\t\t`Warning: maximum height (${restrictions.maxHeight}px) fewer that the minimum height (${restrictions.minHeight}px). It is set equal to the minimum height and height resizing was blocked`,\r\n\t\t\t);\r\n\t\t}\r\n\t\trestrictions.minHeight = restrictions.maxHeight;\r\n\t\trestrictions.heightFrozen = true;\r\n\t}\r\n\r\n\treturn restrictions;\r\n}\r\n","import { AreaRestrictions, Boundaries, VisibleArea } from '../typings';\r\nimport { fitToLimits, ratio } from '../service';\r\n\r\ninterface RefineVisibleAreaParams {\r\n\tvisibleArea: VisibleArea;\r\n\tboundaries: Boundaries;\r\n\tareaRestrictions: AreaRestrictions;\r\n}\r\nexport function refineVisibleArea(params: RefineVisibleAreaParams): VisibleArea {\r\n\tconst { visibleArea: previousVisibleArea, boundaries, areaRestrictions } = params;\r\n\r\n\tlet visibleArea = { ...previousVisibleArea };\r\n\r\n\tconst boundariesRatio = ratio(boundaries);\r\n\tif (visibleArea.width / visibleArea.height !== boundariesRatio) {\r\n\t\tvisibleArea.height = visibleArea.width / boundariesRatio;\r\n\t}\r\n\r\n\treturn fitToLimits(visibleArea, areaRestrictions);\r\n}\r\n","import { MoveEvent, ResizeEvent } from '../events';\r\nimport { AspectRatio, Coordinates, Limits, PositionRestrictions, ResizeDirections, SizeRestrictions } from '../typings';\r\nimport { ALL_DIRECTIONS, HORIZONTAL_DIRECTIONS, VERTICAL_DIRECTIONS } from '../constants';\r\nimport { applyDirections, getBrokenRatio, getIntersections, ratio } from '../service';\r\nimport { move } from './move';\r\n\r\ninterface FitConditionsParams {\r\n\tdirections: ResizeDirections;\r\n\tcoordinates: Coordinates;\r\n\tpositionRestrictions: Limits;\r\n\tsizeRestrictions: SizeRestrictions;\r\n\tpreserveRatio?: boolean;\r\n\tcompensate?: boolean;\r\n}\r\n\r\nexport function fitConditions({\r\n\tdirections,\r\n\tcoordinates,\r\n\tpositionRestrictions = {},\r\n\tsizeRestrictions,\r\n\tpreserveRatio,\r\n\tcompensate,\r\n}: FitConditionsParams): ResizeDirections {\r\n\tconst fixedDirections = { ...directions };\r\n\r\n\tlet currentWidth = applyDirections(coordinates, fixedDirections).width;\r\n\tlet currentHeight = applyDirections(coordinates, fixedDirections).height;\r\n\r\n\t// Prevent strange resizes when the width or height of stencil becomes smaller than 0\r\n\tif (currentWidth < 0) {\r\n\t\tif (fixedDirections.left < 0 && fixedDirections.right < 0) {\r\n\t\t\tfixedDirections.left =\r\n\t\t\t\t-(coordinates.width - sizeRestrictions.minWidth) / (fixedDirections.left / fixedDirections.right);\r\n\t\t\tfixedDirections.right =\r\n\t\t\t\t-(coordinates.width - sizeRestrictions.minWidth) / (fixedDirections.right / fixedDirections.left);\r\n\t\t} else if (fixedDirections.left < 0) {\r\n\t\t\tfixedDirections.left = -(coordinates.width - sizeRestrictions.minWidth);\r\n\t\t} else if (fixedDirections.right < 0) {\r\n\t\t\tfixedDirections.right = -(coordinates.width - sizeRestrictions.minWidth);\r\n\t\t}\r\n\t}\r\n\tif (currentHeight < 0) {\r\n\t\tif (fixedDirections.top < 0 && fixedDirections.bottom < 0) {\r\n\t\t\tfixedDirections.top =\r\n\t\t\t\t-(coordinates.height - sizeRestrictions.minHeight) / (fixedDirections.top / fixedDirections.bottom);\r\n\t\t\tfixedDirections.bottom =\r\n\t\t\t\t-(coordinates.height - sizeRestrictions.minHeight) / (fixedDirections.bottom / fixedDirections.top);\r\n\t\t} else if (fixedDirections.top < 0) {\r\n\t\t\tfixedDirections.top = -(coordinates.height - sizeRestrictions.minHeight);\r\n\t\t} else if (fixedDirections.bottom < 0) {\r\n\t\t\tfixedDirections.bottom = -(coordinates.height - sizeRestrictions.minHeight);\r\n\t\t}\r\n\t}\r\n\r\n\t// Prevent breaking limits\r\n\tlet breaks = getIntersections(applyDirections(coordinates, fixedDirections), positionRestrictions);\r\n\r\n\tif (compensate) {\r\n\t\tif (breaks.left && breaks.left > 0 && breaks.right === 0) {\r\n\t\t\tfixedDirections.right += breaks.left;\r\n\t\t\tfixedDirections.left -= breaks.left;\r\n\t\t} else if (breaks.right && breaks.right > 0 && breaks.left === 0) {\r\n\t\t\tfixedDirections.left += breaks.right;\r\n\t\t\tfixedDirections.right -= breaks.right;\r\n\t\t}\r\n\r\n\t\tif (breaks.top && breaks.top > 0 && breaks.bottom === 0) {\r\n\t\t\tfixedDirections.bottom += breaks.top;\r\n\t\t\tfixedDirections.top -= breaks.top;\r\n\t\t} else if (breaks.bottom && breaks.bottom > 0 && breaks.top === 0) {\r\n\t\t\tfixedDirections.top += breaks.bottom;\r\n\t\t\tfixedDirections.bottom -= breaks.bottom;\r\n\t\t}\r\n\r\n\t\tbreaks = getIntersections(applyDirections(coordinates, fixedDirections), positionRestrictions);\r\n\t}\r\n\r\n\tconst maxResize = {\r\n\t\twidth: Infinity,\r\n\t\theight: Infinity,\r\n\t\tleft: Infinity,\r\n\t\tright: Infinity,\r\n\t\ttop: Infinity,\r\n\t\tbottom: Infinity,\r\n\t};\r\n\r\n\tALL_DIRECTIONS.forEach((direction) => {\r\n\t\tconst intersection = breaks[direction];\r\n\t\tif (intersection && fixedDirections[direction]) {\r\n\t\t\tmaxResize[direction] = Math.max(0, 1 - intersection / fixedDirections[direction]);\r\n\t\t}\r\n\t});\r\n\r\n\tif (preserveRatio) {\r\n\t\tconst multiplier = Math.min(...ALL_DIRECTIONS.map((direction) => maxResize[direction]));\r\n\t\tif (multiplier !== Infinity) {\r\n\t\t\tALL_DIRECTIONS.forEach((direction) => {\r\n\t\t\t\tfixedDirections[direction] *= multiplier;\r\n\t\t\t});\r\n\t\t}\r\n\t} else {\r\n\t\tALL_DIRECTIONS.forEach((direction) => {\r\n\t\t\tif (maxResize[direction] !== Infinity) {\r\n\t\t\t\tfixedDirections[direction] *= maxResize[direction];\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tcurrentWidth = applyDirections(coordinates, fixedDirections).width;\r\n\tcurrentHeight = applyDirections(coordinates, fixedDirections).height;\r\n\r\n\tif (fixedDirections.right + fixedDirections.left) {\r\n\t\tif (currentWidth > sizeRestrictions.maxWidth) {\r\n\t\t\tmaxResize.width =\r\n\t\t\t\t(sizeRestrictions.maxWidth - coordinates.width) / (fixedDirections.right + fixedDirections.left);\r\n\t\t} else if (currentWidth < sizeRestrictions.minWidth) {\r\n\t\t\tmaxResize.width =\r\n\t\t\t\t(sizeRestrictions.minWidth - coordinates.width) / (fixedDirections.right + fixedDirections.left);\r\n\t\t}\r\n\t}\r\n\r\n\tif (fixedDirections.bottom + fixedDirections.top) {\r\n\t\tif (currentHeight > sizeRestrictions.maxHeight) {\r\n\t\t\tmaxResize.height =\r\n\t\t\t\t(sizeRestrictions.maxHeight - coordinates.height) / (fixedDirections.bottom + fixedDirections.top);\r\n\t\t} else if (currentHeight < sizeRestrictions.minHeight) {\r\n\t\t\tmaxResize.height =\r\n\t\t\t\t(sizeRestrictions.minHeight - coordinates.height) / (fixedDirections.bottom + fixedDirections.top);\r\n\t\t}\r\n\t}\r\n\r\n\tif (preserveRatio) {\r\n\t\tconst multiplier = Math.min(maxResize.width, maxResize.height);\r\n\t\tif (multiplier !== Infinity) {\r\n\t\t\tALL_DIRECTIONS.forEach((direction) => {\r\n\t\t\t\tfixedDirections[direction] *= multiplier;\r\n\t\t\t});\r\n\t\t}\r\n\t} else {\r\n\t\tif (maxResize.width !== Infinity) {\r\n\t\t\tHORIZONTAL_DIRECTIONS.forEach((direction) => {\r\n\t\t\t\tfixedDirections[direction] *= maxResize.width;\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (maxResize.height !== Infinity) {\r\n\t\t\tVERTICAL_DIRECTIONS.forEach((direction) => {\r\n\t\t\t\tfixedDirections[direction] *= maxResize.height;\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\treturn fixedDirections;\r\n}\r\n\r\nexport interface ResizeParams {\r\n\tevent: ResizeEvent;\r\n\tcoordinates: Coordinates;\r\n\taspectRatio: AspectRatio;\r\n\tsizeRestrictions: SizeRestrictions;\r\n\tpositionRestrictions: PositionRestrictions;\r\n}\r\n\r\nexport function resize(params: ResizeParams): Coordinates {\r\n\tconst { event, coordinates, aspectRatio, positionRestrictions, sizeRestrictions } = params;\r\n\tconst actualCoordinates = {\r\n\t\t...coordinates,\r\n\t\tright: coordinates.left + coordinates.width,\r\n\t\tbottom: coordinates.top + coordinates.height,\r\n\t};\r\n\r\n\tconst eventParams = event.params || {};\r\n\r\n\tlet directions = {\r\n\t\t...event.directions,\r\n\t};\r\n\r\n\tconst allowedDirections = eventParams.allowedDirections || {\r\n\t\tleft: true,\r\n\t\tright: true,\r\n\t\tbottom: true,\r\n\t\ttop: true,\r\n\t};\r\n\r\n\tif (sizeRestrictions.widthFrozen) {\r\n\t\tdirections.left = 0;\r\n\t\tdirections.right = 0;\r\n\t}\r\n\r\n\tif (sizeRestrictions.heightFrozen) {\r\n\t\tdirections.top = 0;\r\n\t\tdirections.bottom = 0;\r\n\t}\r\n\r\n\tALL_DIRECTIONS.forEach((direction) => {\r\n\t\tif (!allowedDirections[direction]) {\r\n\t\t\tdirections[direction] = 0;\r\n\t\t}\r\n\t});\r\n\r\n\t// 1. First step: determine the safe and desired area\r\n\tdirections = fitConditions({\r\n\t\tcoordinates: actualCoordinates,\r\n\t\tdirections,\r\n\t\tsizeRestrictions: sizeRestrictions,\r\n\t\tpositionRestrictions,\r\n\t});\r\n\r\n\t// 2. Second step: fix desired box to correspondent to aspect ratio\r\n\tlet currentWidth = applyDirections(actualCoordinates, directions).width;\r\n\tlet currentHeight = applyDirections(actualCoordinates, directions).height;\r\n\r\n\t// Checks ratio:\r\n\tlet ratioBroken = eventParams.preserveRatio\r\n\t\t? ratio(actualCoordinates)\r\n\t\t: getBrokenRatio(currentWidth / currentHeight, aspectRatio);\r\n\r\n\tif (ratioBroken) {\r\n\t\tlet { respectDirection } = eventParams;\r\n\t\tif (!respectDirection) {\r\n\t\t\tif (actualCoordinates.width >= actualCoordinates.height || ratioBroken === 1) {\r\n\t\t\t\trespectDirection = 'width';\r\n\t\t\t} else {\r\n\t\t\t\trespectDirection = 'height';\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (respectDirection === 'width') {\r\n\t\t\tconst overlapHeight = currentWidth / ratioBroken - actualCoordinates.height;\r\n\t\t\tif (allowedDirections.top && allowedDirections.bottom) {\r\n\t\t\t\tdirections.bottom = overlapHeight / 2;\r\n\t\t\t\tdirections.top = overlapHeight / 2;\r\n\t\t\t} else if (allowedDirections.bottom) {\r\n\t\t\t\tdirections.bottom = overlapHeight;\r\n\t\t\t} else if (allowedDirections.top) {\r\n\t\t\t\tdirections.top = overlapHeight;\r\n\t\t\t} else if (allowedDirections.right) {\r\n\t\t\t\tdirections.right = 0;\r\n\t\t\t} else if (allowedDirections.left) {\r\n\t\t\t\tdirections.left = 0;\r\n\t\t\t}\r\n\t\t} else if (respectDirection === 'height') {\r\n\t\t\tconst overlapWidth = actualCoordinates.width - currentHeight * ratioBroken;\r\n\t\t\tif (allowedDirections.left && allowedDirections.right) {\r\n\t\t\t\tdirections.left = -overlapWidth / 2;\r\n\t\t\t\tdirections.right = -overlapWidth / 2;\r\n\t\t\t} else if (allowedDirections.left) {\r\n\t\t\t\tdirections.left = -overlapWidth;\r\n\t\t\t} else if (allowedDirections.right) {\r\n\t\t\t\tdirections.right = -overlapWidth;\r\n\t\t\t} else if (allowedDirections.top) {\r\n\t\t\t\tdirections.top = 0;\r\n\t\t\t} else if (allowedDirections.bottom) {\r\n\t\t\t\tdirections.bottom = 0;\r\n\t\t\t}\r\n\t\t}\r\n\t\t// 3. Third step: check if desired box with correct aspect ratios break some limits and fit to this conditions\r\n\t\tdirections = fitConditions({\r\n\t\t\tdirections,\r\n\t\t\tcoordinates: actualCoordinates,\r\n\t\t\tsizeRestrictions: sizeRestrictions,\r\n\t\t\tpositionRestrictions,\r\n\t\t\tpreserveRatio: true,\r\n\t\t\tcompensate: eventParams.compensate,\r\n\t\t});\r\n\t}\r\n\r\n\t// 4. Check if ratio broken (temporary):\r\n\tcurrentWidth = applyDirections(actualCoordinates, directions).width;\r\n\tcurrentHeight = applyDirections(actualCoordinates, directions).height;\r\n\tratioBroken = eventParams.preserveRatio\r\n\t\t? ratio(actualCoordinates)\r\n\t\t: getBrokenRatio(currentWidth / currentHeight, aspectRatio);\r\n\tif (ratioBroken && Math.abs(ratioBroken - currentWidth / currentHeight) > 1e-3) {\r\n\t\tif (process.env.NODE_ENV !== 'production') {\r\n\t\t\tconsole.error(\r\n\t\t\t\t`Something went wrong and ratio was broken: ${currentWidth / currentHeight} instead of ${ratioBroken}`,\r\n\t\t\t);\r\n\t\t}\r\n\t\tALL_DIRECTIONS.forEach((direction) => {\r\n\t\t\tif (!allowedDirections[direction]) {\r\n\t\t\t\tdirections[direction] = 0;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\treturn move({\r\n\t\tevent: new MoveEvent({\r\n\t\t\tleft: -directions.left,\r\n\t\t\ttop: -directions.top,\r\n\t\t}),\r\n\t\tcoordinates: {\r\n\t\t\twidth: coordinates.width + directions.right + directions.left,\r\n\t\t\theight: coordinates.height + directions.top + directions.bottom,\r\n\t\t\tleft: coordinates.left,\r\n\t\t\ttop: coordinates.top,\r\n\t\t},\r\n\t\tpositionRestrictions,\r\n\t});\r\n}\r\n","import { Coordinates, PositionRestrictions, SizeRestrictions } from '../typings';\r\n\r\nexport interface RoundCoordinatesParams {\r\n\tcoordinates: Coordinates;\r\n\tsizeRestrictions: SizeRestrictions;\r\n\tpositionRestrictions: PositionRestrictions;\r\n}\r\nexport function roundCoordinates({\r\n\tcoordinates,\r\n\tsizeRestrictions,\r\n\tpositionRestrictions,\r\n}: RoundCoordinatesParams): Coordinates {\r\n\tconst roundedCoordinates = {\r\n\t\twidth: Math.round(coordinates.width),\r\n\t\theight: Math.round(coordinates.height),\r\n\t\tleft: Math.round(coordinates.left),\r\n\t\ttop: Math.round(coordinates.top),\r\n\t};\r\n\r\n\tif (roundedCoordinates.width > sizeRestrictions.maxWidth) {\r\n\t\troundedCoordinates.width = Math.floor(coordinates.width);\r\n\t} else if (roundedCoordinates.width < sizeRestrictions.minWidth) {\r\n\t\troundedCoordinates.width = Math.ceil(coordinates.width);\r\n\t}\r\n\tif (roundedCoordinates.height > sizeRestrictions.maxHeight) {\r\n\t\troundedCoordinates.height = Math.floor(coordinates.height);\r\n\t} else if (roundedCoordinates.height < sizeRestrictions.minHeight) {\r\n\t\troundedCoordinates.height = Math.ceil(coordinates.height);\r\n\t}\r\n\tif (\r\n\t\tpositionRestrictions.left !== undefined &&\r\n\t\t(roundedCoordinates.left < positionRestrictions.left ||\r\n\t\t\t(positionRestrictions.right !== undefined &&\r\n\t\t\t\troundedCoordinates.left + roundedCoordinates.width > positionRestrictions.right))\r\n\t) {\r\n\t\troundedCoordinates.left = Math.floor(positionRestrictions.left);\r\n\t}\r\n\tif (\r\n\t\tpositionRestrictions.top !== undefined &&\r\n\t\t(roundedCoordinates.top < positionRestrictions.top ||\r\n\t\t\t(positionRestrictions.bottom !== undefined &&\r\n\t\t\t\troundedCoordinates.top + roundedCoordinates.height > positionRestrictions.bottom))\r\n\t) {\r\n\t\troundedCoordinates.top = Math.floor(positionRestrictions.top);\r\n\t}\r\n\r\n\treturn roundedCoordinates;\r\n}\r\n","import {\r\n\tapplyMove,\r\n\tapplyScale,\r\n\tfit,\r\n\tfitToLimits,\r\n\tgetIntersections,\r\n\tinverseMove,\r\n\tmaxScale,\r\n\tratio,\r\n\ttoLimits,\r\n} from '../service';\r\nimport { Coordinates, AreaRestrictions, VisibleArea, Boundaries } from '../typings';\r\n\r\n// This function updates visible area with respect to current transformations and fits\r\n// coordinates to the new visible area\r\nexport interface FitVisibleAreaParams {\r\n\tcoordinates: Coordinates;\r\n\tvisibleArea: VisibleArea;\r\n\tboundaries: Boundaries;\r\n\tareaRestrictions: AreaRestrictions;\r\n}\r\nexport function fitVisibleArea(params: FitVisibleAreaParams): VisibleArea {\r\n\tconst { visibleArea: previousVisibleArea, boundaries, areaRestrictions, coordinates } = params;\r\n\r\n\tlet visibleArea = { ...previousVisibleArea };\r\n\r\n\t// Scale visible area size to fit new boundaries:\r\n\tvisibleArea.height = visibleArea.width / ratio(boundaries);\r\n\tvisibleArea.top += (previousVisibleArea.height - visibleArea.height) / 2;\r\n\r\n\t// Scale visible area to prevent overlap coordinates\r\n\tif (coordinates.height - visibleArea.height > 0 || coordinates.width - visibleArea.width > 0) {\r\n\t\tvisibleArea = applyScale(\r\n\t\t\tvisibleArea,\r\n\t\t\tMath.max(coordinates.height / visibleArea.height, coordinates.width / visibleArea.height),\r\n\t\t);\r\n\t}\r\n\r\n\t// Scale visible area to prevent overlap area restrictions\r\n\tconst intersections = getIntersections(visibleArea, areaRestrictions);\r\n\r\n\tif (intersections.left + intersections.right + intersections.top + intersections.bottom) {\r\n\t\tif (intersections.left + intersections.right > intersections.top + intersections.bottom) {\r\n\t\t\tvisibleArea = applyScale(\r\n\t\t\t\tvisibleArea,\r\n\t\t\t\tMath.min(\r\n\t\t\t\t\t(visibleArea.width + intersections.left + intersections.right) / visibleArea.width,\r\n\t\t\t\t\tmaxScale(visibleArea, areaRestrictions),\r\n\t\t\t\t),\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\tvisibleArea = applyScale(\r\n\t\t\t\tvisibleArea,\r\n\t\t\t\tMath.min(\r\n\t\t\t\t\t(visibleArea.height + intersections.top + intersections.bottom) / visibleArea.height,\r\n\t\t\t\t\tmaxScale(visibleArea, areaRestrictions),\r\n\t\t\t\t),\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\t// Move visible are to prevent moving of the coordinates:\r\n\tconst move = inverseMove(fit(coordinates, toLimits(visibleArea)));\r\n\tif (visibleArea.width < coordinates.width) {\r\n\t\tmove.left = 0;\r\n\t}\r\n\tif (visibleArea.height < coordinates.height) {\r\n\t\tmove.top = 0;\r\n\t}\r\n\tvisibleArea = applyMove(visibleArea, move);\r\n\r\n\t// Move visible area to prevent overlap the area restrictions\r\n\tvisibleArea = fitToLimits(visibleArea, areaRestrictions);\r\n\r\n\treturn visibleArea;\r\n}\r\n","function normalizeComponent(template, style, script, scopeId, isFunctionalTemplate, moduleIdentifier /* server only */, shadowMode, createInjector, createInjectorSSR, createInjectorShadow) {\r\n    if (typeof shadowMode !== 'boolean') {\r\n        createInjectorSSR = createInjector;\r\n        createInjector = shadowMode;\r\n        shadowMode = false;\r\n    }\r\n    // Vue.extend constructor export interop.\r\n    const options = typeof script === 'function' ? script.options : script;\r\n    // render functions\r\n    if (template && template.render) {\r\n        options.render = template.render;\r\n        options.staticRenderFns = template.staticRenderFns;\r\n        options._compiled = true;\r\n        // functional template\r\n        if (isFunctionalTemplate) {\r\n            options.functional = true;\r\n        }\r\n    }\r\n    // scopedId\r\n    if (scopeId) {\r\n        options._scopeId = scopeId;\r\n    }\r\n    let hook;\r\n    if (moduleIdentifier) {\r\n        // server build\r\n        hook = function (context) {\r\n            // 2.3 injection\r\n            context =\r\n                context || // cached call\r\n                    (this.$vnode && this.$vnode.ssrContext) || // stateful\r\n                    (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext); // functional\r\n            // 2.2 with runInNewContext: true\r\n            if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\r\n                context = __VUE_SSR_CONTEXT__;\r\n            }\r\n            // inject component styles\r\n            if (style) {\r\n                style.call(this, createInjectorSSR(context));\r\n            }\r\n            // register component module identifier for async chunk inference\r\n            if (context && context._registeredComponents) {\r\n                context._registeredComponents.add(moduleIdentifier);\r\n            }\r\n        };\r\n        // used by ssr in case component is cached and beforeCreate\r\n        // never gets called\r\n        options._ssrRegister = hook;\r\n    }\r\n    else if (style) {\r\n        hook = shadowMode\r\n            ? function (context) {\r\n                style.call(this, createInjectorShadow(context, this.$root.$options.shadowRoot));\r\n            }\r\n            : function (context) {\r\n                style.call(this, createInjector(context));\r\n            };\r\n    }\r\n    if (hook) {\r\n        if (options.functional) {\r\n            // register for functional component in vue file\r\n            const originalRender = options.render;\r\n            options.render = function renderWithStyleInjection(h, context) {\r\n                hook.call(context);\r\n                return originalRender(h, context);\r\n            };\r\n        }\r\n        else {\r\n            // inject component registration as beforeCreate hook\r\n            const existing = options.beforeCreate;\r\n            options.beforeCreate = existing ? [].concat(existing, hook) : [hook];\r\n        }\r\n    }\r\n    return script;\r\n}\n\nexport default normalizeComponent;\n//# sourceMappingURL=normalize-component.mjs.map\n","import { distance } from './utils';\r\n\r\nexport function calculateGeometricProperties(touches: Touch[], container: HTMLElement) {\r\n\tconst { left, top } = container.getBoundingClientRect();\r\n\r\n\tconst centerMass = { left: 0, top: 0 };\r\n\tlet spread = 0;\r\n\r\n\ttouches.forEach((touch) => {\r\n\t\tcenterMass.left += (touch.clientX - left) / touches.length;\r\n\t\tcenterMass.top += (touch.clientY - top) / touches.length;\r\n\t});\r\n\r\n\ttouches.forEach((touch) => {\r\n\t\tspread += distance(\r\n\t\t\t{ x: centerMass.left, y: centerMass.top },\r\n\t\t\t{ x: touch.clientX - left, y: touch.clientY - top },\r\n\t\t);\r\n\t});\r\n\r\n\treturn { centerMass, spread, count: touches.length };\r\n}\r\n","import { Coordinates } from './typings';\r\n\r\nexport function updateCanvas(\r\n\tcanvas: HTMLCanvasElement,\r\n\tsource: HTMLCanvasElement | HTMLImageElement,\r\n\tcoordinates: Coordinates,\r\n) {\r\n\tcanvas.width = coordinates.width;\r\n\tcanvas.height = coordinates.height;\r\n\r\n\tconst ctx = canvas.getContext('2d');\r\n\tctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\tctx.drawImage(\r\n\t\tsource,\r\n\t\tcoordinates.left,\r\n\t\tcoordinates.top,\r\n\t\tcoordinates.width,\r\n\t\tcoordinates.height,\r\n\t\t0,\r\n\t\t0,\r\n\t\tcoordinates.width,\r\n\t\tcoordinates.height,\r\n\t);\r\n}\r\n","/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg) && arg.length) {\n\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\tif (inner) {\n\t\t\t\t\tclasses.push(inner);\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","'use strict';\r\n\r\n/**\r\n * BEM class name factory.\r\n *\r\n * @typedef {Function} Bem\r\n * @param {String|Object} [elementOrMods] Element name or hash object with mods\r\n * @param {Object} [mods] Hash object with mods\r\n * @returns {String}\r\n */\r\n\r\n/**\r\n * Returns BEM class name factory.\r\n *\r\n * @param {String} componentName Block name\r\n * @returns {Bem}\r\n */\r\nmodule.exports = function bem(componentName) {\r\n    return function (elementOrMods, mods) {\r\n        if (!elementOrMods) {\r\n            return componentName;\r\n        }\r\n\r\n        var element;\r\n\r\n        if (typeof elementOrMods === 'string') {\r\n            element = elementOrMods;\r\n        } else {\r\n            mods = elementOrMods;\r\n        }\r\n\r\n        var base = componentName;\r\n        if (element) {\r\n            base += '__' + element;\r\n        }\r\n\r\n        return base + (\r\n            mods\r\n                ? Object.keys(mods).reduce(function (result, name) {\r\n                    var value = mods[name];\r\n\r\n                    if (value) {\r\n                        result += ' ' + (\r\n                            typeof value === 'boolean'\r\n                                ? (base + '--' + name)\r\n                                : (base + '--' + name + '_' + value)\r\n                        );\r\n                    }\r\n\r\n                    return result;\r\n                }, '')\r\n                : ''\r\n        );\r\n    };\r\n}\r\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { CropperEvent, Diff, MoveDirections, Point, ResizeDirections, Scale } from './typings';\r\n\r\nexport class ManipulateImageEvent implements CropperEvent {\r\n\ttype: 'manipulateImage';\r\n\tnativeEvent: Event;\r\n\tmove: Partial<MoveDirections>;\r\n\tscale: Partial<Scale>;\r\n\tconstructor(move: Partial<MoveDirections> = {}, scale: Partial<Scale> = {}) {\r\n\t\tthis.type = 'manipulateImage';\r\n\t\tthis.move = move;\r\n\t\tthis.scale = scale;\r\n\t}\r\n}\r\n\r\nexport interface ResizeEventParams {\r\n\tcompensate?: boolean;\r\n\tpreserveRatio?: boolean;\r\n\tallowedDirections?: ResizeDirections;\r\n\trespectDirection?: 'width' | 'height';\r\n}\r\n\r\nexport class ResizeEvent implements CropperEvent {\r\n\ttype: 'resize';\r\n\tdirections: ResizeDirections;\r\n\tparams: ResizeEventParams;\r\n\r\n\tconstructor(directions: ResizeDirections, params: ResizeEventParams = {}) {\r\n\t\tthis.type = 'resize';\r\n\t\tthis.directions = directions;\r\n\t\tthis.params = params;\r\n\t}\r\n}\r\n\r\nexport class MoveEvent implements CropperEvent {\r\n\ttype: 'move';\r\n\tdirections: MoveDirections;\r\n\r\n\tconstructor(directions: MoveDirections) {\r\n\t\tthis.type = 'move';\r\n\t\tthis.directions = directions;\r\n\t}\r\n}\r\n\r\nexport class DragEvent implements CropperEvent {\r\n\ttype: 'drag';\r\n\tnativeEvent: Event;\r\n\tposition: Point;\r\n\tpreviousPosition: Point;\r\n\tanchor: Point;\r\n\telement: HTMLElement;\r\n\r\n\tconstructor(nativeEvent: Event, element: HTMLElement, position: Point, previousPosition: Point, anchor: Point) {\r\n\t\tthis.type = 'drag';\r\n\t\tthis.nativeEvent = nativeEvent;\r\n\t\tthis.position = position;\r\n\t\tthis.previousPosition = previousPosition;\r\n\t\tthis.element = element;\r\n\t\tthis.anchor = anchor;\r\n\t}\r\n\tpublic shift(): Diff {\r\n\t\tconst { element, anchor, position } = this;\r\n\t\tconst { left, top } = element.getBoundingClientRect();\r\n\r\n\t\treturn {\r\n\t\t\tleft: position.left - left - anchor.left,\r\n\t\t\ttop: position.top - top - anchor.top,\r\n\t\t};\r\n\t}\r\n}\r\n","import { HorizontalDirection, PositionDirection, VerticalDirection, MainDirections } from './typings';\n\nexport const ALL_DIRECTIONS: PositionDirection[] = ['left', 'right', 'top', 'bottom'];\nexport const HORIZONTAL_DIRECTIONS: HorizontalDirection[] = ['left', 'right'];\nexport const VERTICAL_DIRECTIONS: VerticalDirection[] = ['top', 'bottom'];\nexport const MAIN_DIRECTIONS: MainDirections[] = ['left', 'top'];\nexport const IMAGE_RESTRICTIONS = ['area', 'stencil', 'none'];\nexport const XHR_DONE = 4;\n\nexport const DEFAULT_COORDINATES = {\n\tleft: 0,\n\ttop: 0,\n\twidth: 0,\n\theight: 0,\n};\n","import { DragEvent } from '../core/events';\r\n\r\nexport default {\r\n\tbeforeMount() {\r\n\t\twindow.addEventListener('mouseup', this.onMouseUp, { passive: false });\r\n\t\twindow.addEventListener('mousemove', this.onMouseMove, { passive: false });\r\n\t\twindow.addEventListener('touchmove', this.onTouchMove, { passive: false });\r\n\t\twindow.addEventListener('touchend', this.onTouchEnd, { passive: false });\r\n\t},\r\n\tbeforeDestroy() {\r\n\t\twindow.removeEventListener('mouseup', this.onMouseUp);\r\n\t\twindow.removeEventListener('mousemove', this.onMouseMove);\r\n\t\twindow.removeEventListener('touchmove', this.onTouchMove);\r\n\t\twindow.removeEventListener('touchend', this.onTouchEnd);\r\n\t},\r\n\tmounted() {\r\n\t\tif (!this.$refs.draggable) {\r\n\t\t\tthrow new Error('You should add ref \"draggable\" to your root element to use draggable mixin');\r\n\t\t}\r\n\t\tthis.touches = [];\r\n\t\tthis.hovered = false;\r\n\t},\r\n\tmethods: {\r\n\t\tonMouseOver() {\r\n\t\t\tif (!this.hovered) {\r\n\t\t\t\tthis.hovered = true;\r\n\t\t\t\tthis.$emit('enter');\r\n\t\t\t}\r\n\t\t},\r\n\t\tonMouseLeave() {\r\n\t\t\tif (this.hovered && !this.touches.length) {\r\n\t\t\t\tthis.hovered = false;\r\n\t\t\t\tthis.$emit('leave');\r\n\t\t\t}\r\n\t\t},\r\n\t\tonTouchStart(e) {\r\n\t\t\tif (e.cancelable && !this.disabled && e.touches.length === 1) {\r\n\t\t\t\tthis.touches = [...e.touches];\r\n\r\n\t\t\t\tif (!this.hovered) {\r\n\t\t\t\t\tthis.$emit('enter');\r\n\t\t\t\t\tthis.hovered = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (e.touches.length) {\r\n\t\t\t\t\tthis.initAnchor(\r\n\t\t\t\t\t\tthis.touches.reduce(\r\n\t\t\t\t\t\t\t(mean, touch) => {\r\n\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\tclientX: mean.clientX + touch.clientX / e.touches.length,\r\n\t\t\t\t\t\t\t\t\tclientY: mean.clientY + touch.clientY / e.touches.length,\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{ clientX: 0, clientY: 0 },\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t\tif (e.preventDefault) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t}\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t}\r\n\t\t},\r\n\t\tonTouchEnd() {\r\n\t\t\tthis.processEnd();\r\n\t\t},\r\n\t\tonTouchMove(e) {\r\n\t\t\tif (this.touches.length) {\r\n\t\t\t\tthis.processMove(e, e.touches);\r\n\t\t\t\tif (e.preventDefault) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t}\r\n\t\t\t\tif (e.stopPropagation) {\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonMouseDown(e) {\r\n\t\t\tif (!this.disabled) {\r\n\t\t\t\tconst touch = {\r\n\t\t\t\t\tfake: true,\r\n\t\t\t\t\tclientX: e.clientX,\r\n\t\t\t\t\tclientY: e.clientY,\r\n\t\t\t\t};\r\n\t\t\t\tthis.touches = [touch];\r\n\t\t\t\tthis.initAnchor(touch);\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t}\r\n\t\t},\r\n\t\tonMouseMove(e) {\r\n\t\t\tif (this.touches.length) {\r\n\t\t\t\tthis.processMove(e, [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tfake: true,\r\n\t\t\t\t\t\tclientX: e.clientX,\r\n\t\t\t\t\t\tclientY: e.clientY,\r\n\t\t\t\t\t},\r\n\t\t\t\t]);\r\n\t\t\t\tif (e.preventDefault) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonMouseUp() {\r\n\t\t\tthis.processEnd();\r\n\t\t},\r\n\t\tinitAnchor(touch) {\r\n\t\t\tconst draggable = this.$refs.draggable;\r\n\t\t\tconst { left, right, bottom, top } = draggable.getBoundingClientRect();\r\n\r\n\t\t\tthis.anchor = {\r\n\t\t\t\tleft: touch.clientX - left,\r\n\t\t\t\ttop: touch.clientY - top,\r\n\t\t\t\tbottom: bottom - touch.clientY,\r\n\t\t\t\tright: right - touch.clientX,\r\n\t\t\t};\r\n\t\t},\r\n\t\tprocessMove(event, touches) {\r\n\t\t\tconst newTouches = [...touches];\r\n\t\t\tif (this.touches.length) {\r\n\t\t\t\tif (this.touches.length === 1 && newTouches.length === 1) {\r\n\t\t\t\t\tconst element = this.$refs.draggable;\r\n\t\t\t\t\tthis.$emit(\r\n\t\t\t\t\t\t'drag',\r\n\t\t\t\t\t\tnew DragEvent(\r\n\t\t\t\t\t\t\tevent,\r\n\t\t\t\t\t\t\telement,\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tleft: newTouches[0].clientX,\r\n\t\t\t\t\t\t\t\ttop: newTouches[0].clientY,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tleft: this.touches[0].clientX,\r\n\t\t\t\t\t\t\t\ttop: this.touches[0].clientY,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tthis.anchor,\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t\tthis.touches = newTouches;\r\n\t\t\t}\r\n\t\t},\r\n\t\tprocessEnd() {\r\n\t\t\tthis.touches = [];\r\n\t\t\tif (this.hovered) {\r\n\t\t\t\tthis.$emit('leave');\r\n\t\t\t\tthis.hovered = false;\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n};\r\n","import { Size } from '../typings';\r\nimport { ratio } from '../service';\r\n\r\nexport interface InitStretcherParams {\r\n\tstretcher: HTMLElement;\r\n\timageSize: Size;\r\n}\r\nexport function initStretcher({ stretcher, imageSize }: InitStretcherParams): void {\r\n\tconst aspectRatio = ratio(imageSize);\r\n\tstretcher.style.width = `${imageSize.width}px`;\r\n\tstretcher.style.height = `${stretcher.clientWidth / aspectRatio}px`;\r\n\t// Prevent stretching in future until stretcher will be reinitialized\r\n\tstretcher.style.width = `${stretcher.clientWidth}px`;\r\n}\r\n","import { ImageSize, Point, Size, VisibleArea } from '../typings';\r\n\r\nexport interface DefaultPositionParams {\r\n\tcoordinates: Size;\r\n\timageSize?: ImageSize;\r\n\tvisibleArea?: VisibleArea;\r\n}\r\nexport function defaultPosition({ imageSize, visibleArea, coordinates }: DefaultPositionParams): Point {\r\n\tconst area = visibleArea || imageSize;\r\n\r\n\treturn {\r\n\t\tleft: (visibleArea ? visibleArea.left : 0) + area.width / 2 - coordinates.width / 2,\r\n\t\ttop: (visibleArea ? visibleArea.top : 0) + area.height / 2 - coordinates.height / 2,\r\n\t};\r\n}\r\n","import { ImageRestriction, Limits, Size } from '../typings';\n\nexport interface AreaRestrictionsParams {\n\timageRestriction: ImageRestriction;\n\timageSize: Size;\n}\nexport function areaRestrictions(params: AreaRestrictionsParams): Limits {\n\tconst { imageSize, imageRestriction } = params;\n\n\tlet limits = {};\n\n\tif (imageRestriction === 'area') {\n\t\tlimits = {\n\t\t\tleft: 0,\n\t\t\ttop: 0,\n\t\t\tright: imageSize.width,\n\t\t\tbottom: imageSize.height,\n\t\t};\n\t}\n\n\treturn limits;\n}\n","import { Size, SizeRestrictions } from '../typings';\r\n\r\nexport interface SizeRestrictionsParams {\r\n\timageSize: Size;\r\n\tminWidth: number;\r\n\tminHeight: number;\r\n\tmaxWidth: number;\r\n\tmaxHeight: number;\r\n}\r\nexport function percentRestrictions({\r\n\timageSize,\r\n\tminWidth,\r\n\tminHeight,\r\n\tmaxWidth,\r\n\tmaxHeight,\r\n}: SizeRestrictionsParams): SizeRestrictions {\r\n\treturn {\r\n\t\tminWidth: (minWidth / 100) * imageSize.width,\r\n\t\tminHeight: (minHeight / 100) * imageSize.height,\r\n\t\tmaxWidth: (maxWidth / 100) * imageSize.width,\r\n\t\tmaxHeight: (maxHeight / 100) * imageSize.height,\r\n\t};\r\n}\r\n\r\nexport function pixelsRestrictions({\r\n\tminWidth,\r\n\tminHeight,\r\n\tmaxWidth,\r\n\tmaxHeight,\r\n}: SizeRestrictionsParams): SizeRestrictions {\r\n\treturn {\r\n\t\tminWidth,\r\n\t\tminHeight,\r\n\t\tmaxWidth,\r\n\t\tmaxHeight,\r\n\t};\r\n}\r\n","import { ImageRestriction, Limits, Size } from '../typings';\r\n\r\nexport interface PositionRestrictionsParams {\r\n\timageRestriction: ImageRestriction;\r\n\timageSize: Size;\r\n}\r\nexport function positionRestrictions({ imageSize, imageRestriction }: PositionRestrictionsParams): Limits {\r\n\tlet limits = {};\r\n\r\n\tif (imageRestriction !== 'none') {\r\n\t\tlimits = {\r\n\t\t\tleft: 0,\r\n\t\t\ttop: 0,\r\n\t\t\tright: imageSize.width,\r\n\t\t\tbottom: imageSize.height,\r\n\t\t};\r\n\t}\r\n\r\n\treturn limits;\r\n}\r\n","import Vue from 'vue';\r\nimport Cropper from './Cropper.vue';\r\n\r\nimport { RectangleStencil, CircleStencil } from './components/stencils';\r\n\r\nimport { SimpleHandler } from './components/handlers';\r\n\r\nimport { SimpleLine } from './components/lines';\r\n\r\nexport {\r\n\tPreviewResult,\r\n\tDraggableArea,\r\n\tBoundingBox,\r\n\tLineWrapper,\r\n\tHandlerWrapper,\r\n\tDraggableElement,\r\n} from './components/service';\r\n\r\nexport { RectangleStencil, CircleStencil } from './components/stencils';\r\n\r\nexport { SimpleHandler } from './components/handlers';\r\n\r\nexport { SimpleLine } from './components/lines';\r\n\r\nexport { PreviewImage } from './components/helpers';\r\n\r\nexport { ResizeEvent, MoveEvent, DragEvent } from './core/events';\r\n\r\nexport { default as Cropper } from './Cropper.vue';\r\n\r\nVue.component('cropper', Cropper);\r\nVue.component('rectangle-stencil', RectangleStencil);\r\nVue.component('circle-stencil', CircleStencil);\r\nVue.component('simple-handler', SimpleHandler);\r\nVue.component('simple-line', SimpleLine);\r\n"],"names":["String","fromCharCode","Math","abs","pow","min","max","debounce","func","wait","immediate","later","last","Date","now","timestamp","timeout","setTimeout","result","apply","context","args","debounced","arguments","callNow","clear","clearTimeout","flush","toLimits","object","left","top","right","width","bottom","height","diff","firstObject","secondObject","getCenter","getIntersections","limits","intersections","ALL_DIRECTIONS","forEach","direction","areaLimit","objectLimit","applyDirections","coordinates","directions","inverseMove","applyMove","move","applyScale","scaleFactor","center","progress","currentCenter","ratio","maxScale","area","fit","intersection","getBrokenRatio","currentAspectRatio","aspectRatio","ratioBroken","minimum","maximum","fitSize","firstSize","secondSize","firstRatio","secondRatio","fitToLimits","limitsToSize","limitSizeRestrictions","sizeRestrictions","minWidth","minHeight","maxWidth","maxHeight","joinLimits","a","b","firstDirection","secondDirection","intersectionLimits","validateSize","params","size","ignoreMinimum","correctRatio","distance","approximatedSize","findBestCandidate","candidates","reduce","push","candidate","directionNames","hDirection","vDirection","name","classname","toUpperCase","slice","isLocal","url","test","isCrossOriginURL","pageLocation","window","location","urlMatch","exec","urlparts","protocol","host","port","defaultPort","portOf","isFunction","obj","constructor","call","isUndefined","isObject","getSettings","param","defaultParams","enabled","parseNumber","number","Number","isNaN","parsedNumber","replacedProp","value","oldName","currentName","isEmpty","console","warn","Object","keys","length","isLoadedImage","image","naturalWidth","firstPoint","secondPoint","sqrt","x","y","event","_a","positionRestrictions","movedCoordinates","applyTransform","initialCoordinates","transform","imageSize","moveAlgorithm","prevCoordinates","newCoordinates","MoveEvent","resizeAlgorithm","transforms","Array","isArray","changes","autoZoom","originalCoordinates","originalVisibleArea","areaRestrictions","visibleArea","widthIntersections","heightIntersections","fitBoundaries","cropper","areaHeight","clientHeight","areaWidth","clientWidth","currentHeight","currentWidth","fillBoundaries","defaultSize","boundaries","defaultVisibleArea","boundaryRatio","reference","referenceRatio","areaProperties","coordinatesIntersection","imageRatio","fitCoordinates","previousCoordinates","limitBy","manipulateImage","settings","scale","areaScale","stencilScale","allowedScale","factor","scaleRestrictions","stencil","relativeCoordinates","normalizeEvent","coefficient","type","normalizedEvent_1","normalizedEvent_2","MAIN_DIRECTIONS","refineSizeRestrictions","_b","imageRestriction","restrictions","areaMaximum","widthFrozen","heightFrozen","refineVisibleArea","previousVisibleArea","boundariesRatio","fitConditions","preserveRatio","compensate","fixedDirections","breaks","maxResize","multiplier_1","map","multiplier_2","HORIZONTAL_DIRECTIONS","VERTICAL_DIRECTIONS","resize","actualCoordinates","eventParams","allowedDirections","respectDirection","overlapHeight","overlapWidth","error","roundCoordinates","ceil","floor","round","roundedCoordinates","fitVisibleArea","normalizeComponent","template","style","script","scopeId","isFunctionalTemplate","moduleIdentifier","shadowMode","createInjector","createInjectorSSR","createInjectorShadow","options","render","staticRenderFns","_compiled","functional","_scopeId","hook","$vnode","ssrContext","parent","__VUE_SSR_CONTEXT__","_registeredComponents","add","_ssrRegister","$root","$options","shadowRoot","originalRender","h","existing","beforeCreate","concat","prepareSource","canvas","PI","flipped","orientation","naturalHeight","ctx","getContext","save","translate","rotate","drawImage","restore","base64ToArrayBuffer","base64","replace","binary","atob","len","buffer","ArrayBuffer","view","Uint8Array","i","charCodeAt","objectURLToBlob","callback","http","XMLHttpRequest","open","responseType","onload","status","response","send","getImageTransforms","scaleX","scaleY","getImageData","img","Promise","resolve","reject","fileReader_1","FileReader","e","target","blob","readAsArrayBuffer","http_1","onreadystatechange","readyState","onprogress","getResponseHeader","abort","withCredentials","getStyleTransforms","getStringFromCharCode","dataView","start","str","getUint8","getOrientation","arrayBuffer","orientation_1","DataView","exifIDCode","tiffOffset","littleEndian","app1Start","ifdStart","length_1","byteLength","offset","endianness","getUint16","firstIFDOffset","getUint32","length_2","setUint16","parseImage","src","then","data","source","catch","arrayBufferToDataURL","chunks","chunkSize","uint8","subarray","from","btoa","join","calculateGeometricProperties","touches","container","getBoundingClientRect","centerMass","spread","touch","clientX","clientY","count","updateCanvas","clearRect","classNames","arg","classes","argType","inner","key","hasOwn","hasOwnProperty","module","exports","default","componentName","elementOrMods","mods","element","base","__assign","assign","t","s","n","p","prototype","nativeEvent","position","previousPosition","anchor","DragEvent","IMAGE_RESTRICTIONS","DEFAULT_COORDINATES","beforeMount","addEventListener","onMouseUp","passive","onMouseMove","onTouchMove","onTouchEnd","beforeDestroy","removeEventListener","mounted","$refs","draggable","Error","hovered","methods","onMouseOver","$emit","onMouseLeave","onTouchStart","cancelable","disabled","initAnchor","mean","preventDefault","stopPropagation","processEnd","processMove","onMouseDown","fake","newTouches","stretcher","component","Cropper","RectangleStencil","CircleStencil","SimpleHandler","SimpleLine"],"mappings":"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"}